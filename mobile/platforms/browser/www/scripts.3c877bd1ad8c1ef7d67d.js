!function(t,i){"function"==typeof define&&define.amd?define(function(){return i(t,t.document)}):"object"==typeof exports?module.exports=t.document?i(t,t.document):function(t){return i(t,t.document)}:t.SVG=i(t,t.document)}("undefined"!=typeof window?window:this,function(t,i){var e=(void 0!==this?this:t).SVG=function(t){if(e.supported)return t=new e.Doc(t),e.parser.draw||e.prepare(),t};if(e.ns="http://www.w3.org/2000/svg",e.xmlns="http://www.w3.org/2000/xmlns/",e.xlink="http://www.w3.org/1999/xlink",e.svgjs="http://svgjs.com/svgjs",e.supported=!!i.createElementNS&&!!i.createElementNS(e.ns,"svg").createSVGRect,!e.supported)return!1;e.did=1e3,e.eid=function(t){return"Svgjs"+l(t)+e.did++},e.create=function(t){var e=i.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},e.extend=function(){var t,i,s,n;for(i=(t=[].slice.call(arguments)).pop(),n=t.length-1;n>=0;n--)if(t[n])for(s in i)t[n].prototype[s]=i[s];e.Set&&e.Set.inherit&&e.Set.inherit()},e.invent=function(t){var i="function"==typeof t.create?t.create:function(){this.constructor.call(this,e.create(t.create))};return t.inherit&&(i.prototype=new t.inherit),t.extend&&e.extend(i,t.extend),t.construct&&e.extend(t.parent||e.Container,t.construct),i},e.adopt=function(i){return i?i.instance?i.instance:((s="svg"==i.nodeName?i.parentNode instanceof t.SVGElement?new e.Nested:new e.Doc:"linearGradient"==i.nodeName?new e.Gradient("linear"):"radialGradient"==i.nodeName?new e.Gradient("radial"):e[l(i.nodeName)]?new(e[l(i.nodeName)]):new e.Element(i)).type=i.nodeName,s.node=i,i.instance=s,s instanceof e.Doc&&s.namespace().defs(),s.setData(JSON.parse(i.getAttribute("svgjs:data"))||{}),s):null;var s},e.prepare=function(){var t=i.getElementsByTagName("body")[0],s=(t?new e.Doc(t):e.adopt(i.documentElement).nested()).size(2,0);e.parser={body:t||i.documentElement,draw:s.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:s.polyline().node,path:s.path().node,native:e.create("svg")}},e.parser={native:e.create("svg")},i.addEventListener("DOMContentLoaded",function(){e.parser.draw||e.prepare()},!1),e.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},e.utils={map:function(t,i){var e,s=t.length,n=[];for(e=0;e<s;e++)n.push(i(t[e]));return n},filter:function(t,i){var e,s=t.length,n=[];for(e=0;e<s;e++)i(t[e])&&n.push(t[e]);return n},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(i){return this.filter(i,function(i){return i instanceof t.SVGElement})}},e.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},e.Color=function(t){var i,s;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?e.regex.isRgb.test(t)?(i=e.regex.rgb.exec(t.replace(e.regex.whitespace,"")),this.r=parseInt(i[1]),this.g=parseInt(i[2]),this.b=parseInt(i[3])):e.regex.isHex.test(t)&&(i=e.regex.hex.exec(4==(s=t).length?["#",s.substring(1,2),s.substring(1,2),s.substring(2,3),s.substring(2,3),s.substring(3,4),s.substring(3,4)].join(""):s),this.r=parseInt(i[1],16),this.g=parseInt(i[2],16),this.b=parseInt(i[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},e.extend(e.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+c(this.r)+c(this.g)+c(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new e.Color(t),this},at:function(t){return this.destination?new e.Color({r:~~(this.r+(this.destination.r-this.r)*(t=t<0?0:t>1?1:t)),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)}):this}}),e.Color.test=function(t){return e.regex.isHex.test(t+="")||e.regex.isRgb.test(t)},e.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},e.Color.isColor=function(t){return e.Color.isRgb(t)||e.Color.test(t)},e.Array=function(t,i){0==(t=(t||[]).valueOf()).length&&i&&(t=i.valueOf()),this.value=this.parse(t)},e.extend(e.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var i=this.value[this.value.length-1],e=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(e);for(;this.value.length<this.destination.length;)this.value.push(i)}return this},settle:function(){for(var t=0,i=this.value.length,e=[];t<i;t++)-1==e.indexOf(this.value[t])&&e.push(this.value[t]);return this.value=e},at:function(t){if(!this.destination)return this;for(var i=0,s=this.value.length,n=[];i<s;i++)n.push(this.value[i]+(this.destination[i]-this.value[i])*t);return new e.Array(n)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(e.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(i){for(var e=i.slice(0),s=e.length;s--;)Array.isArray(e[s])&&(e[s]=t(e[s]));return e}(this.value),t}}),e.PointArray=function(t,i){e.Array.call(this,t,i||[[0,0]])},e.PointArray.prototype=new e.Array,e.PointArray.prototype.constructor=e.PointArray,e.extend(e.PointArray,{toString:function(){for(var t=0,i=this.value.length,e=[];t<i;t++)e.push(this.value[t].join(","));return e.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var i=0,s=this.value.length,n=[];i<s;i++)n.push([this.value[i][0]+(this.destination[i][0]-this.value[i][0])*t,this.value[i][1]+(this.destination[i][1]-this.value[i][1])*t]);return new e.PointArray(n)},parse:function(t){var i=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(e.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var s=0,n=t.length;s<n;s+=2)i.push([t[s],t[s+1]]);return i},move:function(t,i){var e=this.bbox();if(t-=e.x,i-=e.y,!isNaN(t)&&!isNaN(i))for(var s=this.value.length-1;s>=0;s--)this.value[s]=[this.value[s][0]+t,this.value[s][1]+i];return this},size:function(t,i){var e,s=this.bbox();for(e=this.value.length-1;e>=0;e--)s.width&&(this.value[e][0]=(this.value[e][0]-s.x)*t/s.width+s.x),s.height&&(this.value[e][1]=(this.value[e][1]-s.y)*i/s.height+s.y);return this},bbox:function(){return e.parser.poly.setAttribute("points",this.toString()),e.parser.poly.getBBox()}});for(var s={M:function(t,i,e){return i.x=e.x=t[0],i.y=e.y=t[1],["M",i.x,i.y]},L:function(t,i){return i.x=t[0],i.y=t[1],["L",t[0],t[1]]},H:function(t,i){return i.x=t[0],["H",t[0]]},V:function(t,i){return i.y=t[0],["V",t[0]]},C:function(t,i){return i.x=t[4],i.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,i){return i.x=t[2],i.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,i){return i.x=t[2],i.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,i){return i.x=t[0],i.y=t[1],["T",t[0],t[1]]},Z:function(t,i,e){return i.x=e.x,i.y=e.y,["Z"]},A:function(t,i){return i.x=t[5],i.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},n="mlhvqtcsaz".split(""),a=0,r=n.length;a<r;++a)s[n[a]]=function(t){return function(i,e,n){if("H"==t)i[0]=i[0]+e.x;else if("V"==t)i[0]=i[0]+e.y;else if("A"==t)i[5]=i[5]+e.x,i[6]=i[6]+e.y;else for(var a=0,r=i.length;a<r;++a)i[a]=i[a]+(a%2?e.y:e.x);return s[t](i,e,n)}}(n[a].toUpperCase());e.PathArray=function(t,i){e.Array.call(this,t,i||[["M",0,0]])},e.PathArray.prototype=new e.Array,e.PathArray.prototype.constructor=e.PathArray,e.extend(e.PathArray,{toString:function(){return function(t){for(var i=0,e=t.length,s="";i<e;i++)s+=t[i][0],null!=t[i][1]&&(s+=t[i][1],null!=t[i][2]&&(s+=" ",s+=t[i][2],null!=t[i][3]&&(s+=" ",s+=t[i][3],s+=" ",s+=t[i][4],null!=t[i][5]&&(s+=" ",s+=t[i][5],s+=" ",s+=t[i][6],null!=t[i][7]&&(s+=" ",s+=t[i][7])))));return s+" "}(this.value)},move:function(t,i){var e=this.bbox();if(t-=e.x,i-=e.y,!isNaN(t)&&!isNaN(i))for(var s,n=this.value.length-1;n>=0;n--)"M"==(s=this.value[n][0])||"L"==s||"T"==s?(this.value[n][1]+=t,this.value[n][2]+=i):"H"==s?this.value[n][1]+=t:"V"==s?this.value[n][1]+=i:"C"==s||"S"==s||"Q"==s?(this.value[n][1]+=t,this.value[n][2]+=i,this.value[n][3]+=t,this.value[n][4]+=i,"C"==s&&(this.value[n][5]+=t,this.value[n][6]+=i)):"A"==s&&(this.value[n][6]+=t,this.value[n][7]+=i);return this},size:function(t,i){var e,s,n=this.bbox();for(e=this.value.length-1;e>=0;e--)"M"==(s=this.value[e][0])||"L"==s||"T"==s?(this.value[e][1]=(this.value[e][1]-n.x)*t/n.width+n.x,this.value[e][2]=(this.value[e][2]-n.y)*i/n.height+n.y):"H"==s?this.value[e][1]=(this.value[e][1]-n.x)*t/n.width+n.x:"V"==s?this.value[e][1]=(this.value[e][1]-n.y)*i/n.height+n.y:"C"==s||"S"==s||"Q"==s?(this.value[e][1]=(this.value[e][1]-n.x)*t/n.width+n.x,this.value[e][2]=(this.value[e][2]-n.y)*i/n.height+n.y,this.value[e][3]=(this.value[e][3]-n.x)*t/n.width+n.x,this.value[e][4]=(this.value[e][4]-n.y)*i/n.height+n.y,"C"==s&&(this.value[e][5]=(this.value[e][5]-n.x)*t/n.width+n.x,this.value[e][6]=(this.value[e][6]-n.y)*i/n.height+n.y)):"A"==s&&(this.value[e][1]=this.value[e][1]*t/n.width,this.value[e][2]=this.value[e][2]*i/n.height,this.value[e][6]=(this.value[e][6]-n.x)*t/n.width+n.x,this.value[e][7]=(this.value[e][7]-n.y)*i/n.height+n.y);return this},equalCommands:function(t){var i,s,n;for(t=new e.PathArray(t),n=this.value.length===t.value.length,i=0,s=this.value.length;n&&i<s;i++)n=this.value[i][0]===t.value[i][0];return n},morph:function(t){return t=new e.PathArray(t),this.destination=this.equalCommands(t)?t:null,this},at:function(t){if(!this.destination)return this;var i,s,n,a,r=this.value,h=this.destination.value,o=[],u=new e.PathArray;for(i=0,s=r.length;i<s;i++){for(o[i]=[r[i][0]],n=1,a=r[i].length;n<a;n++)o[i][n]=r[i][n]+(h[i][n]-r[i][n])*t;"A"===o[i][0]&&(o[i][4]=+(0!=o[i][4]),o[i][5]=+(0!=o[i][5]))}return u.value=o,u},parse:function(t){if(t instanceof e.PathArray)return t.valueOf();var i,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(e.regex.numbersWithDots,o).replace(e.regex.pathLetters," $& ").replace(e.regex.hyphen,"$1 -").trim().split(e.regex.delimiter):t.reduce(function(t,i){return[].concat.call(t,i)},[]);var a=[],r=new e.Point,h=new e.Point,u=0,l=t.length;do{e.regex.isPathLetter.test(t[u])?(i=t[u],++u):"M"==i?i="L":"m"==i&&(i="l"),a.push(s[i].call(null,t.slice(u,u+=n[i.toUpperCase()]).map(parseFloat),r,h))}while(l>u);return a},bbox:function(){return e.parser.path.setAttribute("d",this.toString()),e.parser.path.getBBox()}}),e.Number=e.invent({create:function(t,i){this.value=0,this.unit=i||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(i=t.match(e.regex.numberAndUnit))&&(this.value=parseFloat(i[1]),"%"==i[5]?this.value/=100:"s"==i[5]&&(this.value*=1e3),this.unit=i[5]):t instanceof e.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new e.Number(t),new e.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new e.Number(t),new e.Number(this-t,this.unit||t.unit)},times:function(t){return t=new e.Number(t),new e.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new e.Number(t),new e.Number(this/t,this.unit||t.unit)},to:function(t){var i=new e.Number(this);return"string"==typeof t&&(i.unit=t),i},morph:function(t){return this.destination=new e.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new e.Number(this.destination).minus(this).times(t).plus(this):this}}}),e.Element=e.invent({create:function(t){this._stroke=e.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._events=t._events||{},this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,i){return this.x(t).y(i)},center:function(t,i){return this.cx(t).cy(i)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,i){var s=f(this,t,i);return this.width(new e.Number(s.width)).height(new e.Number(s.height))},clone:function(t){this.writeDataToDom();var i=v(this.node.cloneNode(!0));return t?t.add(i):this.after(i),i},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,i){var e=this.bbox();return t>e.x&&i>e.y&&t<e.x+e.width&&i<e.y+e.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(e.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var i=this.classes();i.push(t),this.attr("class",i.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(i){return i!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return e.get(this.attr(t))},parent:function(i){var s=this;if(!s.node.parentNode)return null;if(s=e.adopt(s.node.parentNode),!i)return s;for(;s&&s.node instanceof t.SVGElement;){if("string"==typeof i?s.matches(i):s instanceof i)return s;if(!s.node.parentNode||"#document"==s.node.parentNode.nodeName||"#document-fragment"==s.node.parentNode.nodeName)return null;s=e.adopt(s.node.parentNode)}},doc:function(){return this instanceof e.Doc?this:this.parent(e.Doc)},parents:function(t){var i=[],e=this;do{if(!(e=e.parent(t))||!e.node)break;i.push(e)}while(e.parent);return i},matches:function(t){return function(t,i){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,i)}(this.node,t)},native:function(){return this.node},svg:function(t){var s=i.createElement("svg");if(!(t&&this instanceof e.Parent))return s.appendChild(t=i.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),s.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");s.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,a=s.firstChild.childNodes.length;n<a;n++)this.node.appendChild(s.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,i){return t instanceof i}(this,t)}}}),e.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},e.morph=function(t){return function(i,s){return new e.MorphObj(i,s).at(t)}},e.Situation=e.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new e.Number(t.duration).valueOf(),this.delay=new e.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),e.FX=e.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,i,s){"object"==typeof t&&(i=t.ease,s=t.delay,t=t.duration);var n=new e.Situation({duration:t||1e3,delay:s||0,ease:e.easing[i||"-"]||i});return this.queue(n),this},delay:function(t){var i=new e.Situation({duration:t,delay:0,ease:e.easing["-"]});return this.queue(i)},target:function(t){return t&&t instanceof e.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof e.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof e.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,i,s,n=this.situation;if(n.init)return this;for(t in n.animations)for(s=this.target()[t](),Array.isArray(s)||(s=[s]),Array.isArray(n.animations[t])||(n.animations[t]=[n.animations[t]]),i=s.length;i--;)n.animations[t][i]instanceof e.Number&&(s[i]=new e.Number(s[i])),n.animations[t][i]=s[i].morph(n.animations[t][i]);for(t in n.attrs)n.attrs[t]=new e.MorphObj(this.target().attr(t),n.attrs[t]);for(t in n.styles)n.styles[t]=new e.MorphObj(this.target().style(t),n.styles[t]);return n.initialTransformation=this.target().matrixify(),n.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,i){var e=this.active;return this.active=!1,i&&this.clearQueue(),t&&this.situation&&(!e&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),this.at("number"==typeof this.situation.loops?this.situation.loops:1,!0)},at:function(t,i){var e=this.situation.duration/this._speed;return this.absPos=t,i||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*e,this.situation.finish=this.situation.start+e,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,i){var e=this.last();return e.loops=null==t||t,e.loop=0,i&&(e.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var i=this.last();return i.reversed=void 0===t?!i.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var i=this.last();return this.target().on("finished.fx",function e(s){s.detail.situation==i&&(t.call(this,i),this.off("finished.fx",e))}),this._callStart()},during:function(t){var i=this.last(),s=function(s){s.detail.situation==i&&t.call(this,s.detail.pos,e.morph(s.detail.pos),s.detail.eased,i)};return this.target().off("during.fx",s).on("during.fx",s),this.after(function(){this.off("during.fx",s)}),this._callStart()},afterAll:function(t){var i=function i(e){t.call(this),this.off("allfinished.fx",i)};return this.target().off("allfinished.fx",i).on("allfinished.fx",i),this._callStart()},duringAll:function(t){var i=function(i){t.call(this,i.detail.pos,e.morph(i.detail.pos),i.detail.eased,i.detail.situation)};return this.target().off("during.fx",i).on("during.fx",i),this.afterAll(function(){this.off("during.fx",i)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,i,e){return this.last()[e||"animations"][t]=i,this._callStart()},step:function(t){var i,e,s;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(i=Math.max(this.absPos,0),e=Math.floor(i),!0===this.situation.loops||e<this.situation.loops?(this.pos=i-e,s=this.situation.loop,this.situation.loop=e):(this.absPos=this.situation.loops,this.pos=1,s=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-s)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var n=this.situation.ease(this.pos);for(var a in this.situation.once)a>this.lastPos&&a<=n&&(this.situation.once[a].call(this.target(),this.pos,n),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:n,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=n,this):this},eachAt:function(){var t,i,s,n=this,a=this.target(),r=this.situation;for(t in r.animations)s=[].concat(r.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(n.pos),n.pos):t}),a[t].apply(a,s);for(t in r.attrs)s=[t].concat(r.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(n.pos),n.pos):t}),a.attr.apply(a,s);for(t in r.styles)s=[t].concat(r.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(n.pos),n.pos):t}),a.style.apply(a,s);if(r.transforms.length){for(s=r.initialTransformation,t=0,i=r.transforms.length;t<i;t++){var h=r.transforms[t];h instanceof e.Matrix?s=h.relative?s.multiply((new e.Matrix).morph(h).at(r.ease(this.pos))):s.morph(h).at(r.ease(this.pos)):(h.relative||h.undo(s.extract()),s=s.multiply(h.at(r.ease(this.pos))))}a.matrix(s)}return this},once:function(t,i,e){var s=this.last();return e||(t=s.ease(t)),s.once[t]=i,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:e.Element,construct:{animate:function(t,i,s){return(this.fx||(this.fx=new e.FX(this))).animate(t,i,s)},delay:function(t){return(this.fx||(this.fx=new e.FX(this))).delay(t)},stop:function(t,i){return this.fx&&this.fx.stop(t,i),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),e.MorphObj=e.invent({create:function(t,i){return e.Color.isColor(i)?new e.Color(t).morph(i):e.regex.delimiter.test(t)?e.regex.pathLetters.test(t)?new e.PathArray(t).morph(i):new e.Array(t).morph(i):e.regex.numberAndUnit.test(i)?new e.Number(t).morph(i):(this.value=t,void(this.destination=i))},extend:{at:function(t,i){return i<1?this.value:this.destination},valueOf:function(){return this.value}}}),e.extend(e.FX,{attr:function(t,i,e){if("object"==typeof t)for(var s in t)this.attr(s,t[s]);else this.add(t,i,"attrs");return this},style:function(t,i){if("object"==typeof t)for(var e in t)this.style(e,t[e]);else this.add(t,i,"styles");return this},x:function(t,i){if(this.target()instanceof e.G)return this.transform({x:t},i),this;var s=new e.Number(t);return s.relative=i,this.add("x",s)},y:function(t,i){if(this.target()instanceof e.G)return this.transform({y:t},i),this;var s=new e.Number(t);return s.relative=i,this.add("y",s)},cx:function(t){return this.add("cx",new e.Number(t))},cy:function(t){return this.add("cy",new e.Number(t))},move:function(t,i){return this.x(t).y(i)},center:function(t,i){return this.cx(t).cy(i)},size:function(t,i){var s;return this.target()instanceof e.Text?this.attr("font-size",t):(t&&i||(s=this.target().bbox()),t||(t=s.width/s.height*i),i||(i=s.height/s.width*t),this.add("width",new e.Number(t)).add("height",new e.Number(i))),this},width:function(t){return this.add("width",new e.Number(t))},height:function(t){return this.add("height",new e.Number(t))},plot:function(t,i,e,s){return 4==arguments.length?this.plot([t,i,e,s]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new e.Number(t)):this},viewbox:function(t,i,s,n){return this.target()instanceof e.Container&&this.add("viewbox",new e.ViewBox(t,i,s,n)),this},update:function(t){if(this.target()instanceof e.Stop){if("number"==typeof t||t instanceof e.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),e.Box=e.invent({create:function(t,i,s,n){if(!("object"!=typeof t||t instanceof e.Element))return e.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=i,this.width=s,this.height=n),g(this)},extend:{merge:function(t){var i=new this.constructor;return i.x=Math.min(this.x,t.x),i.y=Math.min(this.y,t.y),i.width=Math.max(this.x+this.width,t.x+t.width)-i.x,i.height=Math.max(this.y+this.height,t.y+t.height)-i.y,g(i)},transform:function(t){var i,s=1/0,n=-1/0,a=1/0,r=-1/0;return[new e.Point(this.x,this.y),new e.Point(this.x2,this.y),new e.Point(this.x,this.y2),new e.Point(this.x2,this.y2)].forEach(function(i){i=i.transform(t),s=Math.min(s,i.x),n=Math.max(n,i.x),a=Math.min(a,i.y),r=Math.max(r,i.y)}),(i=new this.constructor).x=s,i.width=n-s,i.y=a,i.height=r-a,g(i),i}}}),e.BBox=e.invent({create:function(t){if(e.Box.apply(this,[].slice.call(arguments)),t instanceof e.Element){var s;try{if(i.documentElement.contains){if(!i.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=i)throw new Exception("Element not in the dom")}s=t.node.getBBox()}catch(r){if(t instanceof e.Shape){var a=t.clone(e.parser.draw.instance).show();s=a.node.getBBox(),a.remove()}else s={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}e.Box.call(this,s)}},inherit:e.Box,parent:e.Element,construct:{bbox:function(){return new e.BBox(this)}}}),e.BBox.prototype.constructor=e.BBox,e.extend(e.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),e.RBox=e.invent({create:function(t){e.Box.apply(this,[].slice.call(arguments)),t instanceof e.Element&&e.Box.call(this,t.node.getBoundingClientRect())},inherit:e.Box,parent:e.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new e.RBox(this).transform(t.screenCTM().inverse()):new e.RBox(this).addOffset()}}}),e.RBox.prototype.constructor=e.RBox,e.Matrix=e.invent({create:function(t){var i,s=p([1,0,0,1,0,0]);for(t=t instanceof e.Element?t.matrixify():"string"==typeof t?p(t.split(e.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):"object"==typeof t?t:s,i=M.length-1;i>=0;--i)this[M[i]]=null!=t[M[i]]?t[M[i]]:s[M[i]]},extend:{extract:function(){var t=d(this,0,1),i=d(this,1,0),s=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(s*Math.PI/180)+this.f*Math.sin(s*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(s*Math.PI/180)+this.e*Math.sin(-s*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-s,skewY:180/Math.PI*Math.atan2(i.y,i.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:s,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new e.Matrix(this)}},clone:function(){return new e.Matrix(this)},morph:function(t){return this.destination=new e.Matrix(t),this},at:function(t){return this.destination?new e.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new e.Matrix(this.native().multiply(function(t){return t instanceof e.Matrix||(t=new e.Matrix(t)),t}(t).native()))},inverse:function(){return new e.Matrix(this.native().inverse())},translate:function(t,i){return new e.Matrix(this.native().translate(t||0,i||0))},scale:function(t,i,s,n){return 1==arguments.length?i=t:3==arguments.length&&(n=s,s=i,i=t),this.around(s,n,new e.Matrix(t,0,0,i,0,0))},rotate:function(t,i,s){return t=e.utils.radians(t),this.around(i,s,new e.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,i){return"x"==t?this.scale(-1,1,i,0):"y"==t?this.scale(1,-1,0,i):this.scale(-1,-1,t,null!=i?i:t)},skew:function(t,i,s,n){return 1==arguments.length?i=t:3==arguments.length&&(n=s,s=i,i=t),t=e.utils.radians(t),i=e.utils.radians(i),this.around(s,n,new e.Matrix(1,Math.tan(i),Math.tan(t),1,0,0))},skewX:function(t,i,e){return this.skew(t,0,i,e)},skewY:function(t,i,e){return this.skew(0,t,i,e)},around:function(t,i,s){return this.multiply(new e.Matrix(1,0,0,1,t||0,i||0)).multiply(s).multiply(new e.Matrix(1,0,0,1,-t||0,-i||0))},native:function(){for(var t=e.parser.native.createSVGMatrix(),i=M.length-1;i>=0;i--)t[M[i]]=this[M[i]];return t},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:e.Element,construct:{ctm:function(){return new e.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof e.Nested){var t=this.rect(1,1),i=t.node.getScreenCTM();return t.remove(),new e.Matrix(i)}return new e.Matrix(this.node.getScreenCTM())}}}),e.Point=e.invent({create:function(t,i){var e;e=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=i?i:t}:{x:0,y:0},this.x=e.x,this.y=e.y},extend:{clone:function(){return new e.Point(this)},morph:function(t,i){return this.destination=new e.Point(t,i),this},at:function(t){return this.destination?new e.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=e.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new e.Point(this.native().matrixTransform(t.native()))}}}),e.extend(e.Element,{point:function(t,i){return new e.Point(t,i).transform(this.screenCTM().inverse())}}),e.extend(e.Element,{attr:function(t,i,s){if(null==t){for(t={},s=(i=this.node.attributes).length-1;s>=0;s--)t[i[s].nodeName]=e.regex.isNumber.test(i[s].nodeValue)?parseFloat(i[s].nodeValue):i[s].nodeValue;return t}if("object"==typeof t)for(i in t)this.attr(i,t[i]);else if(null===i)this.node.removeAttribute(t);else{if(null==i)return null==(i=this.node.getAttribute(t))?e.defaults.attrs[t]:e.regex.isNumber.test(i)?parseFloat(i):i;"stroke-width"==t?this.attr("stroke",parseFloat(i)>0?this._stroke:null):"stroke"==t&&(this._stroke=i),"fill"!=t&&"stroke"!=t||(e.regex.isImage.test(i)&&(i=this.doc().defs().image(i,0,0)),i instanceof e.Image&&(i=this.doc().defs().pattern(0,0,function(){this.add(i)}))),"number"==typeof i?i=new e.Number(i):e.Color.isColor(i)?i=new e.Color(i):Array.isArray(i)&&(i=new e.Array(i)),"leading"==t?this.leading&&this.leading(i):"string"==typeof s?this.node.setAttributeNS(s,t,i.toString()):this.node.setAttribute(t,i.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,i)}return this}}),e.extend(e.Element,{transform:function(t,i){var s,n;if("object"!=typeof t)return s=new e.Matrix(this).extract(),"string"==typeof t?s[t]:s;if(s=new e.Matrix(this),i=!!i||!!t.relative,null!=t.a)s=i?s.multiply(new e.Matrix(t)):new e.Matrix(t);else if(null!=t.rotation)m(t,this),s=s.rotate(i?t.rotation:t.rotation-s.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(m(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!i){var a=s.extract();t.scaleX=1*t.scaleX/a.scaleX,t.scaleY=1*t.scaleY/a.scaleY}s=s.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else null!=t.skew||null!=t.skewX||null!=t.skewY?(m(t,this),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,i||(a=s.extract(),s=s.multiply((new e.Matrix).skew(a.skewX,a.skewY,t.cx,t.cy).inverse())),s=s.skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?this.bbox()["c"+t.flip]:t.offset:null==t.offset?(n=this.bbox(),t.flip=n.cx,t.offset=n.cy):t.flip=t.offset,s=(new e.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(i?s=s.translate(t.x,t.y):(null!=t.x&&(s.e=t.x),null!=t.y&&(s.f=t.y)));return this.attr("transform",s)}}),e.extend(e.FX,{transform:function(t,i){var s,n,a=this.target();return"object"!=typeof t?(s=new e.Matrix(a).extract(),"string"==typeof t?s[t]:s):(i=!!i||!!t.relative,null!=t.a?s=new e.Matrix(t):null!=t.rotation?(m(t,a),s=new e.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(m(t,a),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,s=new e.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(m(t,a),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,s=new e.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?a.bbox()["c"+t.flip]:t.offset:null==t.offset?(n=a.bbox(),t.flip=n.cx,t.offset=n.cy):t.flip=t.offset,s=(new e.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(s=new e.Translate(t.x,t.y)),s?(s.relative=i,this.last().transforms.push(s),this._callStart()):this)}}),e.extend(e.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(e.regex.transforms).slice(0,-1).map(function(t){var i=t.trim().split("(");return[i[0],i[1].split(e.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,i){return"matrix"==i[0]?t.multiply(p(i[1])):t[i[0]].apply(t,i[1])},new e.Matrix)},toParent:function(t){if(this==t)return this;var i=this.screenCTM(),e=t.screenCTM().inverse();return this.addTo(t).untransform().transform(e.multiply(i)),this},toDoc:function(){return this.toParent(this.doc())}}),e.Transformation=e.invent({create:function(t,i){if(arguments.length>1&&"boolean"!=typeof i)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var e=0,s=this.arguments.length;e<s;++e)this[this.arguments[e]]=t[e];else if("object"==typeof t)for(e=0,s=this.arguments.length;e<s;++e)this[this.arguments[e]]=t[this.arguments[e]];this.inversed=!1,!0===i&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var i=[],s=0,n=this.arguments.length;s<n;++s)i.push(this[this.arguments[s]]);var a=this._undo||new e.Matrix;return a=(new e.Matrix).morph(e.Matrix.prototype[this.method].apply(a,i)).at(t),this.inversed?a.inverse():a},undo:function(t){for(var i=0,s=this.arguments.length;i<s;++i)t[this.arguments[i]]=void 0===this[this.arguments[i]]?0:t[this.arguments[i]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(e[l(this.method)])(t,!0).at(1),this}}}),e.Translate=e.invent({parent:e.Matrix,inherit:e.Transformation,create:function(t,i){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),e.Rotate=e.invent({parent:e.Matrix,inherit:e.Transformation,create:function(t,i){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var i=(new e.Matrix).rotate((new e.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?i.inverse():i},undo:function(t){return this._undo=t,this}}}),e.Scale=e.invent({parent:e.Matrix,inherit:e.Transformation,create:function(t,i){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),e.Skew=e.invent({parent:e.Matrix,inherit:e.Transformation,create:function(t,i){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),e.extend(e.Element,{style:function(t,i){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(i in t)this.style(i,t[i]);else{if(!e.regex.isCss.test(t))return this.node.style[u(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});i=t.pop();)this.style(i[0],i[1])}else this.node.style[u(t)]=null===i||e.regex.isBlank.test(i)?"":i;return this}}),e.Parent=e.invent({create:function(t){this.constructor.call(this,t)},inherit:e.Element,extend:{children:function(){return e.utils.map(e.utils.filterSVGElements(this.node.childNodes),function(t){return e.adopt(t)})},add:function(t,i){return null==i?this.node.appendChild(t.node):t.node!=this.node.childNodes[i]&&this.node.insertBefore(t.node,this.node.childNodes[i]),this},put:function(t,i){return this.add(t,i),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return e.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,i){var s,n,a=this.children();for(s=0,n=a.length;s<n;s++)a[s]instanceof e.Element&&t.apply(a[s],[s,a]),i&&a[s]instanceof e.Container&&a[s].each(t,i);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),e.extend(e.Parent,{ungroup:function(t,i){return 0===i||this instanceof e.Defs||this.node==e.parser.draw?this:(t=t||(this instanceof e.Doc?this:this.parent(e.Parent)),i=i||1/0,this.each(function(){return this instanceof e.Defs?this:this instanceof e.Parent?this.ungroup(t,i-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,i){return this.ungroup(t,i)}}),e.Container=e.invent({create:function(t){this.constructor.call(this,t)},inherit:e.Parent}),e.ViewBox=e.invent({create:function(t){var i,s,n,a,r,h,o,u=1,l=1,c=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof e.Element){for(h=t,o=t,r=(t.attr("viewBox")||"").match(c),n=new e.Number(t.width()),a=new e.Number(t.height());"%"==n.unit;)u*=n.value,n=new e.Number(h instanceof e.Doc?h.parent().offsetWidth:h.parent().width()),h=h.parent();for(;"%"==a.unit;)l*=a.value,a=new e.Number(o instanceof e.Doc?o.parent().offsetHeight:o.parent().height()),o=o.parent();this.x=0,this.y=0,this.width=n*u,this.height=a*l,this.zoom=1,r&&(i=parseFloat(r[0]),s=parseFloat(r[1]),n=parseFloat(r[2]),a=parseFloat(r[3]),this.zoom=this.width/this.height>n/a?this.height/a:this.width/n,this.x=i,this.y=s,this.width=n,this.height=a)}else t="string"==typeof t?t.match(c).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,i,s,n){return this.destination=new e.ViewBox(t,i,s,n),this},at:function(t){return this.destination?new e.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:e.Container,construct:{viewbox:function(t,i,s,n){return 0==arguments.length?new e.ViewBox(this):this.attr("viewBox",new e.ViewBox(t,i,s,n))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){e.Element.prototype[t]=function(i){return null==i?e.off(this,t):e.on(this,t,i),this}}),e.listenerId=0,e.on=function(t,i,s,n,a){var r=s.bind(n||t),h=t instanceof e.Element?t.node:t;h.instance=h.instance||{_events:{}};var o=h.instance._events;s._svgjsListenerId||(s._svgjsListenerId=++e.listenerId),i.split(e.regex.delimiter).forEach(function(t){var i=t.split(".")[0],e=t.split(".")[1]||"*";o[i]=o[i]||{},o[i][e]=o[i][e]||{},o[i][e][s._svgjsListenerId]=r,h.addEventListener(i,r,a||!1)})},e.off=function(t,i,s,n){var a=t instanceof e.Element?t.node:t;if(a.instance&&("function"!=typeof s||(s=s._svgjsListenerId))){var r=a.instance._events;(i||"").split(e.regex.delimiter).forEach(function(t){var i,h,o=t&&t.split(".")[0],u=t&&t.split(".")[1];if(s)r[o]&&r[o][u||"*"]&&(a.removeEventListener(o,r[o][u||"*"][s],n||!1),delete r[o][u||"*"][s]);else if(o&&u){if(r[o]&&r[o][u]){for(h in r[o][u])e.off(a,[o,u].join("."),h);delete r[o][u]}}else if(u)for(t in r)for(i in r[t])u===i&&e.off(a,[t,u].join("."));else if(o){if(r[o]){for(i in r[o])e.off(a,[o,i].join("."));delete r[o]}}else{for(t in r)e.off(a,t);a.instance._events={}}})}},e.extend(e.Element,{on:function(t,i,s,n){return e.on(this,t,i,s,n),this},off:function(t,i){return e.off(this.node,t,i),this},fire:function(i,s){return this.node.dispatchEvent(i instanceof t.Event?i:i=new e.CustomEvent(i,{detail:s,cancelable:!0})),this._event=i,this},event:function(){return this._event}}),e.Defs=e.invent({create:"defs",inherit:e.Container}),e.G=e.invent({create:"g",inherit:e.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),i=this.transform();return t.x+=i.x,t.x2+=i.x,t.cx+=i.x,t.y+=i.y,t.y2+=i.y,t.cy+=i.y,t}},construct:{group:function(){return this.put(new e.G)}}}),e.Doc=e.invent({create:function(t){t&&("svg"==(t="string"==typeof t?i.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,e.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:e.Container,extend:{namespace:function(){return this.attr({xmlns:e.ns,version:"1.1"}).attr("xmlns:xlink",e.xlink,e.xmlns).attr("xmlns:svgjs",e.svgjs,e.xmlns)},defs:function(){var t;return this._defs||(this._defs=(t=this.node.getElementsByTagName("defs")[0])?e.adopt(t):new e.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,e.parser.draw.parentNode||this.node.appendChild(e.parser.draw),this},clone:function(t){this.writeDataToDom();var i=this.node,e=v(i.cloneNode(!0));return t?(t.node||t).appendChild(e.node):i.parentNode.insertBefore(e.node,i.nextSibling),e}}}),e.extend(e.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,i=this.parent();return i.removeElement(this).add(this,t),i instanceof e.Doc&&i.node.appendChild(i.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof e.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var i=this.position();return this.parent().add(t,i),this},after:function(t){t.remove();var i=this.position();return this.parent().add(t,i+1),this}}),e.Mask=e.invent({create:function(){this.constructor.call(this,e.create("mask")),this.targets=[]},inherit:e.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],e.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new e.Mask)}}}),e.extend(e.Element,{maskWith:function(t){return this.masker=t instanceof e.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),e.ClipPath=e.invent({create:function(){this.constructor.call(this,e.create("clipPath")),this.targets=[]},inherit:e.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new e.ClipPath)}}}),e.extend(e.Element,{clipWith:function(t){return this.clipper=t instanceof e.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),e.Gradient=e.invent({create:function(t){this.constructor.call(this,e.create(t+"Gradient")),this.type=t},inherit:e.Container,extend:{at:function(t,i,s){return this.put(new e.Stop).update(t,i,s)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,i,s){return"transform"==t&&(t="gradientTransform"),e.Container.prototype.attr.call(this,t,i,s)}},construct:{gradient:function(t,i){return this.defs().gradient(t,i)}}}),e.extend(e.Gradient,e.FX,{from:function(t,i){return this.attr("radial"==(this._target||this).type?{fx:new e.Number(t),fy:new e.Number(i)}:{x1:new e.Number(t),y1:new e.Number(i)})},to:function(t,i){return this.attr("radial"==(this._target||this).type?{cx:new e.Number(t),cy:new e.Number(i)}:{x2:new e.Number(t),y2:new e.Number(i)})}}),e.extend(e.Defs,{gradient:function(t,i){return this.put(new e.Gradient(t)).update(i)}}),e.Stop=e.invent({create:"stop",inherit:e.Element,extend:{update:function(t){return("number"==typeof t||t instanceof e.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new e.Number(t.offset)),this}}}),e.Pattern=e.invent({create:"pattern",inherit:e.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,i,s){return"transform"==t&&(t="patternTransform"),e.Container.prototype.attr.call(this,t,i,s)}},construct:{pattern:function(t,i,e){return this.defs().pattern(t,i,e)}}}),e.extend(e.Defs,{pattern:function(t,i,s){return this.put(new e.Pattern).update(s).attr({x:0,y:0,width:t,height:i,patternUnits:"userSpaceOnUse"})}}),e.Shape=e.invent({create:function(t){this.constructor.call(this,t)},inherit:e.Element}),e.Bare=e.invent({create:function(t,i){if(this.constructor.call(this,e.create(t)),i)for(var s in i.prototype)"function"==typeof i.prototype[s]&&(this[s]=i.prototype[s])},inherit:e.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(i.createTextNode(t)),this}}}),e.extend(e.Parent,{element:function(t,i){return this.put(new e.Bare(t,i))}}),e.Symbol=e.invent({create:"symbol",inherit:e.Container,construct:{symbol:function(){return this.put(new e.Symbol)}}}),e.Use=e.invent({create:"use",inherit:e.Shape,extend:{element:function(t,i){return this.attr("href",(i||"")+"#"+t,e.xlink)}},construct:{use:function(t,i){return this.put(new e.Use).element(t,i)}}}),e.Rect=e.invent({create:"rect",inherit:e.Shape,construct:{rect:function(t,i){return this.put(new e.Rect).size(t,i)}}}),e.Circle=e.invent({create:"circle",inherit:e.Shape,construct:{circle:function(t){return this.put(new e.Circle).rx(new e.Number(t).divide(2)).move(0,0)}}}),e.extend(e.Circle,e.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),e.Ellipse=e.invent({create:"ellipse",inherit:e.Shape,construct:{ellipse:function(t,i){return this.put(new e.Ellipse).size(t,i).move(0,0)}}}),e.extend(e.Ellipse,e.Rect,e.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),e.extend(e.Circle,e.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new e.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new e.Number(t).divide(2))},size:function(t,i){var s=f(this,t,i);return this.rx(new e.Number(s.width).divide(2)).ry(new e.Number(s.height).divide(2))}}),e.Line=e.invent({create:"line",inherit:e.Shape,extend:{array:function(){return new e.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,i,s,n){return null==t?this.array():(t=void 0!==i?{x1:t,y1:i,x2:s,y2:n}:new e.PointArray(t).toLine(),this.attr(t))},move:function(t,i){return this.attr(this.array().move(t,i).toLine())},size:function(t,i){var e=f(this,t,i);return this.attr(this.array().size(e.width,e.height).toLine())}},construct:{line:function(t,i,s,n){return e.Line.prototype.plot.apply(this.put(new e.Line),null!=t?[t,i,s,n]:[0,0,0,0])}}}),e.Polyline=e.invent({create:"polyline",inherit:e.Shape,construct:{polyline:function(t){return this.put(new e.Polyline).plot(t||new e.PointArray)}}}),e.Polygon=e.invent({create:"polygon",inherit:e.Shape,construct:{polygon:function(t){return this.put(new e.Polygon).plot(t||new e.PointArray)}}}),e.extend(e.Polyline,e.Polygon,{array:function(){return this._array||(this._array=new e.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new e.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,i){return this.attr("points",this.array().move(t,i))},size:function(t,i){var e=f(this,t,i);return this.attr("points",this.array().size(e.width,e.height))}}),e.extend(e.Line,e.Polyline,e.Polygon,{morphArray:e.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var i=this.bbox();return null==t?i.width:this.size(t,i.height)},height:function(t){var i=this.bbox();return null==t?i.height:this.size(i.width,t)}}),e.Path=e.invent({create:"path",inherit:e.Shape,extend:{morphArray:e.PathArray,array:function(){return this._array||(this._array=new e.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new e.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,i){return this.attr("d",this.array().move(t,i))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,i){var e=f(this,t,i);return this.attr("d",this.array().size(e.width,e.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new e.Path).plot(t||new e.PathArray)}}}),e.Image=e.invent({create:"image",inherit:e.Shape,extend:{load:function(i){if(!i)return this;var s=this,n=new t.Image;return e.on(n,"load",function(){e.off(n);var t=s.parent(e.Pattern);null!==t&&(0==s.width()&&0==s.height()&&s.size(n.width,n.height),t&&0==t.width()&&0==t.height()&&t.size(s.width(),s.height()),"function"==typeof s._loaded&&s._loaded.call(s,{width:n.width,height:n.height,ratio:n.width/n.height,url:i}))}),e.on(n,"error",function(t){e.off(n),"function"==typeof s._error&&s._error.call(s,t)}),this.attr("href",n.src=this.src=i,e.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,i,s){return this.put(new e.Image).load(t).size(i||0,s||i||0)}}}),e.Text=e.invent({create:function(){this.constructor.call(this,e.create("text")),this.dom.leading=new e.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",e.defaults.attrs["font-family"])},inherit:e.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var i=this.attr("y"),e="number"==typeof i?i-this.bbox().y:0;return null==t?"number"==typeof i?i-e:i:this.attr("y","number"==typeof t.valueOf()?t+e:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var i=this.node.childNodes,s=0,n=i.length;s<n;++s)0!=s&&3!=i[s].nodeType&&1==e.adopt(i[s]).dom.newLined&&(t+="\n"),t+=i[s].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{s=0;for(var a=(t=t.split("\n")).length;s<a;s++)this.tspan(t[s]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new e.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,i=e.utils.map(e.utils.filterSVGElements(t.childNodes),function(t){return e.adopt(t)});return new e.Set(i)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var i=this,s=0,n=this.dom.leading*new e.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(i.textPath()||this.attr("x",i.attr("x")),"\n"==this.text()?s+=n:(this.attr("dy",n+s),s=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new e.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new e.Text).text(t)},plain:function(t){return this.put(new e.Text).plain(t)}}}),e.Tspan=e.invent({create:"tspan",inherit:e.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(e.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),e.extend(e.Text,e.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(i.createTextNode(t)),this},tspan:function(t){var i=(this.textPath&&this.textPath()||this).node,s=new e.Tspan;return!1===this._build&&this.clear(),i.appendChild(s.node),s.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),e.TextPath=e.invent({create:"textPath",inherit:e.Parent,parent:e.Text,construct:{morphArray:e.PathArray,path:function(t){for(var i=new e.TextPath,s=this.doc().defs().path(t);this.node.hasChildNodes();)i.node.appendChild(this.node.firstChild);return this.node.appendChild(i.node),i.attr("href","#"+s,e.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var i=this.track(),e=null;return i&&(e=i.plot(t)),null==t?e:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return e.adopt(this.node.firstChild)}}}),e.Nested=e.invent({create:function(){this.constructor.call(this,e.create("svg")),this.style("overflow","visible")},inherit:e.Container,construct:{nested:function(){return this.put(new e.Nested)}}}),e.A=e.invent({create:"a",inherit:e.Container,extend:{to:function(t){return this.attr("href",t,e.xlink)},show:function(t){return this.attr("show",t,e.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new e.A).to(t)}}}),e.extend(e.Element,{linkTo:function(t){var i=new e.A;return"function"==typeof t?t.call(i,i):i.to(t),this.parent().put(i).put(this)}}),e.Marker=e.invent({create:"marker",inherit:e.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,i){return this.attr("refX",t).attr("refY",i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,i,e){return this.defs().marker(t,i,e)}}}),e.extend(e.Defs,{marker:function(t,i,s){return this.put(new e.Marker).size(t,i).ref(t/2,i/2).viewbox(0,0,t,i).attr("orient","auto").update(s)}}),e.extend(e.Line,e.Polyline,e.Polygon,e.Path,{marker:function(t,i,s,n){var a=["marker"];return"all"!=t&&a.push(t),a=a.join("-"),t=arguments[1]instanceof e.Marker?arguments[1]:this.doc().marker(i,s,n),this.attr(a,t)}});var h={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,i){return"color"==i?t:t+"-"+i}};function o(t,i,s,n){return s+n.replace(e.regex.dots," .")}function u(t){return t.toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()})}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){var i=t.toString(16);return 1==i.length?"0"+i:i}function f(t,i,e){if(null==i||null==e){var s=t.bbox();null==i?i=s.width/s.height*e:null==e&&(e=s.height/s.width*i)}return{width:i,height:e}}function d(t,i,e){return{x:i*t.a+e*t.c+0,y:i*t.b+e*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function m(t,i){t.cx=null==t.cx?i.bbox().cx:t.cx,t.cy=null==t.cy?i.bbox().cy:t.cy}function v(i){for(var s=i.childNodes.length-1;s>=0;s--)i.childNodes[s]instanceof t.SVGElement&&v(i.childNodes[s]);return e.adopt(i).id(e.eid(i.nodeName))}function g(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function y(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach(function(t){var i,s={};s[t]=function(s){if(void 0===s)return this;if("string"==typeof s||e.Color.isRgb(s)||s&&"function"==typeof s.fill)this.attr(t,s);else for(i=h[t].length-1;i>=0;i--)null!=s[h[t][i]]&&this.attr(h.prefix(t,h[t][i]),s[h[t][i]]);return this},e.extend(e.Element,e.FX,s)}),e.extend(e.Element,e.FX,{rotate:function(t,i,e){return this.transform({rotation:t,cx:i,cy:e})},skew:function(t,i,e,s){return this.transform(1==arguments.length||3==arguments.length?{skew:t,cx:i,cy:e}:{skewX:t,skewY:i,cx:e,cy:s})},scale:function(t,i,e,s){return this.transform(1==arguments.length||3==arguments.length?{scale:t,cx:i,cy:e}:{scaleX:t,scaleY:i,cx:e,cy:s})},translate:function(t,i){return this.transform({x:t,y:i})},flip:function(t,i){return this.transform({flip:t||"both",offset:i="number"==typeof t?t:i})},matrix:function(t){return this.attr("transform",new e.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new e.Number(t).plus(this instanceof e.FX?0:this.x()),!0)},dy:function(t){return this.y(new e.Number(t).plus(this instanceof e.FX?0:this.y()),!0)},dmove:function(t,i){return this.dx(t).dy(i)}}),e.extend(e.Rect,e.Ellipse,e.Circle,e.Gradient,e.FX,{radius:function(t,i){var s=(this._target||this).type;return"radial"==s||"circle"==s?this.attr("r",new e.Number(t)):this.rx(t).ry(null==i?t:i)}}),e.extend(e.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),e.extend(e.Parent,e.Text,e.Tspan,e.FX,{font:function(t,i){if("object"==typeof t)for(i in t)this.font(i,t[i]);return"leading"==t?this.leading(i):this.attr("anchor"==t?"text-anchor":"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?"font-"+t:t,i)}}),e.Set=e.invent({create:function(t){t instanceof e.Set?this.members=t.members.slice():Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,i,e=[].slice.call(arguments);for(t=0,i=e.length;t<i;t++)this.members.push(e[t]);return this},remove:function(t){var i=this.index(t);return i>-1&&this.members.splice(i,1),this},each:function(t){for(var i=0,e=this.members.length;i<e;i++)t.apply(this.members[i],[i,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new e.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new e.Set(t)}}}),e.FX.Set=e.invent({create:function(t){this.set=t}}),e.Set.inherit=function(){var t=[];for(var i in e.Shape.prototype)"function"==typeof e.Shape.prototype[i]&&"function"!=typeof e.Set.prototype[i]&&t.push(i);for(var i in t.forEach(function(t){e.Set.prototype[t]=function(){for(var i=0,s=this.members.length;i<s;i++)this.members[i]&&"function"==typeof this.members[i][t]&&this.members[i][t].apply(this.members[i],arguments);return"animate"==t?this.fx||(this.fx=new e.FX.Set(this)):this}}),t=[],e.FX.prototype)"function"==typeof e.FX.prototype[i]&&"function"!=typeof e.FX.Set.prototype[i]&&t.push(i);t.forEach(function(t){e.FX.Set.prototype[t]=function(){for(var i=0,e=this.set.members.length;i<e;i++)this.set.members[i].fx[t].apply(this.set.members[i].fx,arguments);return this}})},e.extend(e.Element,{data:function(t,i,e){if("object"==typeof t)for(i in t)this.data(i,t[i]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(s){return this.attr("data-"+t)}else this.attr("data-"+t,null===i?null:!0===e||"string"==typeof i||"number"==typeof i?i:JSON.stringify(i));return this}}),e.extend(e.Element,{remember:function(t,i){if("object"==typeof arguments[0])for(var i in t)this.remember(i,t[i]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=i}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),e.get=function(t){var s=i.getElementById(function(i){var s=(t||"").toString().match(e.regex.reference);if(s)return s[1]}()||t);return e.adopt(s)},e.select=function(t,s){return new e.Set(e.utils.map((s||i).querySelectorAll(t),function(t){return e.adopt(t)}))},e.extend(e.Parent,{select:function(t){return e.select(t,this.node)}});var M="abcdef".split("");if("function"!=typeof t.CustomEvent){var x=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var s=i.createEvent("CustomEvent");return s.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),s};x.prototype=t.Event.prototype,e.CustomEvent=x}else e.CustomEvent=t.CustomEvent;return function(i){for(var e=0,s=["moz","webkit"],n=0;n<s.length&&!t.requestAnimationFrame;++n)i.requestAnimationFrame=i[s[n]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[s[n]+"CancelAnimationFrame"]||i[s[n]+"CancelRequestAnimationFrame"];i.requestAnimationFrame=i.requestAnimationFrame||function(t){var s=(new Date).getTime(),n=Math.max(0,16-(s-e)),a=i.setTimeout(function(){t(s+n)},n);return e=s+n,a},i.cancelAnimationFrame=i.cancelAnimationFrame||i.clearTimeout}(t),e}),function(t,i){"use strict";function e(){}e.TO_RAD=Math.PI/180,e.TO_DEG=180/Math.PI,e.PI_X2=2*Math.PI,e.PI_DIV4=Math.PI/4;var s=Object.create(e.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:e.prototype},extend:{value:function(t,i){for(var e in t)void 0!==s.prototype[e]&&!0!==i||(s.prototype[e]="function"==typeof t[e]&&"function"==typeof t[e].bind?t[e].bind(s):t[e])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*e.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*e.TO_DEG}),s.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(t){if("[object Array]"==Object.prototype.toString.call(t))return{longitude:t.length>=1?0:void 0,latitude:t.length>=2?1:void 0,elevation:t.length>=3?2:void 0};var i=function(i){var e;return i.every(function(i){return"object"!=typeof t||!t.hasOwnProperty(i)||(e=i,!1)}),e},e=i(["lng","lon","longitude"]),s=i(["lat","latitude"]),n=i(["alt","altitude","elevation","elev"]);return void 0!==s||void 0!==e||void 0!==n?{latitude:s,longitude:e,elevation:n}:void 0},getLat:function(t,i){return!0===i?t[this.getKeys(t).latitude]:this.useDecimal(t[this.getKeys(t).latitude])},latitude:function(t){return this.getLat.call(this,t)},getLon:function(t,i){return!0===i?t[this.getKeys(t).longitude]:this.useDecimal(t[this.getKeys(t).longitude])},longitude:function(t){return this.getLon.call(this,t)},getElev:function(t){return t[this.getKeys(t).elevation]},elevation:function(t){return this.getElev.call(this,t)},coords:function(t,i){var e={latitude:!0===i?t[this.getKeys(t).latitude]:this.useDecimal(t[this.getKeys(t).latitude]),longitude:!0===i?t[this.getKeys(t).longitude]:this.useDecimal(t[this.getKeys(t).longitude])},s=t[this.getKeys(t).elevation];return void 0!==s&&(e.elevation=s),e},ll:function(t,i){return this.coords.call(this,t,i)},validate:function(t){var i=this.getKeys(t);if(void 0===i||void 0===i.latitude||"undefined"===i.longitude)return!1;var e=t[i.latitude],s=t[i.longitude];return!(void 0===e||!this.isDecimal(e)&&!this.isSexagesimal(e)||void 0===s||!this.isDecimal(s)&&!this.isSexagesimal(s)||(e=this.useDecimal(e),s=this.useDecimal(s),e<this.minLat||e>this.maxLat||s<this.minLon||s>this.maxLon))},getDistance:function(t,i,e,n){e=Math.floor(e)||1,n=Math.floor(n)||0;var a,r,h,o,u,l,c,f=this.coords(t),d=this.coords(i),p=6378137,m=6356752.314245,v=1/298.257223563,g=(d.longitude-f.longitude).toRad(),y=Math.atan((1-v)*Math.tan(parseFloat(f.latitude).toRad())),M=Math.atan((1-v)*Math.tan(parseFloat(d.latitude).toRad())),x=Math.sin(y),b=Math.cos(y),w=Math.sin(M),_=Math.cos(M),E=g,C=100;do{var P=Math.sin(E),A=Math.cos(E);if(0===(l=Math.sqrt(_*P*(_*P)+(b*w-x*_*A)*(b*w-x*_*A))))return s.distance=0;a=x*w+b*_*A,r=Math.atan2(l,a),u=a-2*x*w/(o=1-(h=b*_*P/l)*h),isNaN(u)&&(u=0);var N=v/16*o*(4+v*(4-3*o));c=E,E=g+(1-N)*v*h*(r+N*l*(u+N*a*(2*u*u-1)))}while(Math.abs(E-c)>1e-12&&--C>0);if(0===C)return NaN;var S=o*(p*p-m*m)/(m*m),k=S/1024*(256+S*(S*(74-47*S)-128)),T=m*(1+S/16384*(4096+S*(S*(320-175*S)-768)))*(r-k*l*(u+k/4*(a*(2*u*u-1)-k/6*u*(4*l*l-3)*(4*u*u-3))));if(T=T.toFixed(n),void 0!==this.elevation(t)&&void 0!==this.elevation(i)){var I=Math.abs(this.elevation(t)-this.elevation(i));T=Math.sqrt(T*T+I*I)}return this.distance=Math.round(T*Math.pow(10,n)/e)*e/Math.pow(10,n)},getDistanceSimple:function(t,i,e){e=Math.floor(e)||1;var n=Math.round(Math.acos(Math.sin(this.latitude(i).toRad())*Math.sin(this.latitude(t).toRad())+Math.cos(this.latitude(i).toRad())*Math.cos(this.latitude(t).toRad())*Math.cos(this.longitude(t).toRad()-this.longitude(i).toRad()))*this.radius);return s.distance=Math.floor(Math.round(n/e)*e)},getCenter:function(t){var i=t;if("object"==typeof t&&!(t instanceof Array))for(var s in i=[],t)i.push(this.coords(t[s]));if(!i.length)return!1;var n,a,r,h=0,o=0,u=0;i.forEach(function(t){n=this.latitude(t).toRad(),a=this.longitude(t).toRad(),h+=Math.cos(n)*Math.cos(a),o+=Math.cos(n)*Math.sin(a),u+=Math.sin(n)},this);var l=i.length;return h/=l,o/=l,u/=l,a=Math.atan2(o,h),r=Math.sqrt(h*h+o*o),{latitude:((n=Math.atan2(u,r))*e.TO_DEG).toFixed(6),longitude:(a*e.TO_DEG).toFixed(6)}},getBounds:function(t){if(!t.length)return!1;var i=this.elevation(t[0]),e={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==i&&(e.maxElev=0,e.minElev=1/0);for(var s=0,n=t.length;s<n;++s)e.maxLat=Math.max(this.latitude(t[s]),e.maxLat),e.minLat=Math.min(this.latitude(t[s]),e.minLat),e.maxLng=Math.max(this.longitude(t[s]),e.maxLng),e.minLng=Math.min(this.longitude(t[s]),e.minLng),i&&(e.maxElev=Math.max(this.elevation(t[s]),e.maxElev),e.minElev=Math.min(this.elevation(t[s]),e.minElev));return e},getCenterOfBounds:function(t){var i=this.getBounds(t),e=i.minLng+(i.maxLng-i.minLng)/2;return{latitude:parseFloat((i.minLat+(i.maxLat-i.minLat)/2).toFixed(6)),longitude:parseFloat(e.toFixed(6))}},getBoundsOfDistance:function(t,i){var s,n,a=this.latitude(t),r=this.longitude(t),h=a.toRad(),o=r.toRad(),u=i/this.radius,l=h-u,c=h+u,f=this.maxLat.toRad(),d=this.minLat.toRad(),p=this.maxLon.toRad(),m=this.minLon.toRad();if(l>d&&c<f){var v=Math.asin(Math.sin(u)/Math.cos(h));(s=o-v)<m&&(s+=e.PI_X2),(n=o+v)>p&&(n-=e.PI_X2)}else l=Math.max(l,d),c=Math.min(c,f),s=m,n=p;return[{latitude:l.toDeg(),longitude:s.toDeg()},{latitude:c.toDeg(),longitude:n.toDeg()}]},isPointInside:function(t,i){for(var e=!1,s=-1,n=i.length,a=n-1;++s<n;a=s)(this.longitude(i[s])<=this.longitude(t)&&this.longitude(t)<this.longitude(i[a])||this.longitude(i[a])<=this.longitude(t)&&this.longitude(t)<this.longitude(i[s]))&&this.latitude(t)<(this.latitude(i[a])-this.latitude(i[s]))*(this.longitude(t)-this.longitude(i[s]))/(this.longitude(i[a])-this.longitude(i[s]))+this.latitude(i[s])&&(e=!e);return e},preparePolygonForIsPointInsideOptimized:function(t){for(var i=0,e=t.length-1;i<t.length;i++)this.longitude(t[e])===this.longitude(t[i])?(t[i].constant=this.latitude(t[i]),t[i].multiple=0):(t[i].constant=this.latitude(t[i])-this.longitude(t[i])*this.latitude(t[e])/(this.longitude(t[e])-this.longitude(t[i]))+this.longitude(t[i])*this.latitude(t[i])/(this.longitude(t[e])-this.longitude(t[i])),t[i].multiple=(this.latitude(t[e])-this.latitude(t[i]))/(this.longitude(t[e])-this.longitude(t[i]))),e=i},isPointInsideWithPreparedPolygon:function(t,i){for(var e=!1,s=this.longitude(t),n=this.latitude(t),a=0,r=i.length-1;a<i.length;a++)(this.longitude(i[a])<s&&this.longitude(i[r])>=s||this.longitude(i[r])<s&&this.longitude(i[a])>=s)&&(e^=s*i[a].multiple+i[a].constant<n),r=a;return e},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(t,i,e){return this.getDistance(t,i)<e},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(t,i){var s=this.longitude(i).toRad()-this.longitude(t).toRad(),n=Math.log(Math.tan(this.latitude(i).toRad()/2+e.PI_DIV4)/Math.tan(this.latitude(t).toRad()/2+e.PI_DIV4));return Math.abs(s)>Math.PI&&(s=s>0?-1*(e.PI_X2-s):e.PI_X2+s),(Math.atan2(s,n).toDeg()+360)%360},getBearing:function(t,i){return i.latitude=this.latitude(i),i.longitude=this.longitude(i),t.latitude=this.latitude(t),t.longitude=this.longitude(t),(Math.atan2(Math.sin(i.longitude.toRad()-t.longitude.toRad())*Math.cos(i.latitude.toRad()),Math.cos(t.latitude.toRad())*Math.sin(i.latitude.toRad())-Math.sin(t.latitude.toRad())*Math.cos(i.latitude.toRad())*Math.cos(i.longitude.toRad()-t.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(t,i,e){var s,n;switch(n="circle"==e?this.getBearing(t,i):this.getRhumbLineBearing(t,i),Math.round(n/22.5)){case 1:s={exact:"NNE",rough:"N"};break;case 2:s={exact:"NE",rough:"N"};break;case 3:s={exact:"ENE",rough:"E"};break;case 4:s={exact:"E",rough:"E"};break;case 5:s={exact:"ESE",rough:"E"};break;case 6:s={exact:"SE",rough:"E"};break;case 7:s={exact:"SSE",rough:"S"};break;case 8:s={exact:"S",rough:"S"};break;case 9:s={exact:"SSW",rough:"S"};break;case 10:s={exact:"SW",rough:"S"};break;case 11:s={exact:"WSW",rough:"W"};break;case 12:s={exact:"W",rough:"W"};break;case 13:s={exact:"WNW",rough:"W"};break;case 14:s={exact:"NW",rough:"W"};break;case 15:s={exact:"NNW",rough:"N"};break;default:s={exact:"N",rough:"N"}}return s.bearing=n,s},getDirection:function(t,i,e){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(t,i){return Object.keys(i).map(function(e){var s=this.getDistance(t,i[e]),n=Object.create(i[e]);return n.distance=s,n.key=e,n},this).sort(function(t,i){return t.distance-i.distance})},isPointInLine:function(t,i,e){return(this.getDistance(i,t,1,3)+this.getDistance(t,e,1,3)).toFixed(3)==this.getDistance(i,e,1,3)},isPointNearLine:function(t,i,e,s){return this.getDistanceFromLine(t,i,e)<s},getDistanceFromLine:function(t,i,e){var s=this.getDistance(i,t,1,3),n=this.getDistance(t,e,1,3),a=this.getDistance(i,e,1,3),r=Math.acos((s*s+a*a-n*n)/(2*s*a)),h=Math.acos((n*n+a*a-s*s)/(2*n*a));return r>Math.PI/2?s:h>Math.PI/2?n:Math.sin(r)*s},findNearest:function(t,i,e,s){e=e||0,s=s||1;var n=this.orderByDistance(t,i);return 1===s?n[e]:n.splice(e,s)},getPathLength:function(t){for(var i,e=0,s=0,n=t.length;s<n;++s)i&&(e+=this.getDistance(this.coords(t[s]),i)),i=this.coords(t[s]);return e},getSpeed:function(t,i,e){var n=e&&e.unit||"km";"mph"==n?n="mi":"kmh"==n&&(n="km");var a=s.getDistance(t,i);return Math.round(a/(1*i.time/1e3-1*t.time/1e3)*3600*this.measures[n]*1e4)/1e4},computeDestinationPoint:function(t,i,e,s){var n=this.latitude(t),a=this.longitude(t);s=void 0===s?this.radius:Number(s);var r=Number(i)/s,h=Number(e).toRad(),o=Number(n).toRad(),u=Number(a).toRad(),l=Math.asin(Math.sin(o)*Math.cos(r)+Math.cos(o)*Math.sin(r)*Math.cos(h)),c=u+Math.atan2(Math.sin(h)*Math.sin(r)*Math.cos(o),Math.cos(r)-Math.sin(o)*Math.sin(l));return c=(c+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:l.toDeg(),longitude:c.toDeg()}},convertUnit:function(t,i,e){if(0===i)return 0;if(void 0===i){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;i=this.distance}if(e=null==e?4:e,void 0!==this.measures[t=t||"m"])return this.round(i*this.measures[t],e);throw new Error("Unknown unit for conversion.")},useDecimal:function(t){if("[object Array]"===Object.prototype.toString.call(t)){var i=this;return t.map(function(t){if(i.isDecimal(t))return i.useDecimal(t);if("object"==typeof t){if(i.validate(t))return i.coords(t);for(var e in t)t[e]=i.useDecimal(t[e]);return t}return i.isSexagesimal(t)?i.sexagesimal2decimal(t):t})}if("object"==typeof t&&this.validate(t))return this.coords(t);if("object"==typeof t){for(var e in t)t[e]=this.useDecimal(t[e]);return t}if(this.isDecimal(t))return parseFloat(t);if(!0===this.isSexagesimal(t))return parseFloat(this.sexagesimal2decimal(t));throw new Error("Unknown format.")},decimal2sexagesimal:function(t){if(t in this.sexagesimal)return this.sexagesimal[t];var i=t.toString().split("."),e=Math.abs(i[0]),s=60*("0."+(i[1]||0)),n=s.toString().split(".");return s=Math.floor(s),n=(60*("0."+(n[1]||0))).toFixed(2),this.sexagesimal[t]=e+"\xb0 "+s+"' "+n+'"',this.sexagesimal[t]},sexagesimal2decimal:function(t){if(t in this.decimal)return this.decimal[t];var i=new RegExp(this.sexagesimalPattern).exec(t),e=0,s=0;i&&(e=parseFloat(i[2]/60),s=parseFloat(i[4]/3600)||0);var n=(parseFloat(i[1])+e+s).toFixed(8);return n="S"==i[7]||"W"==i[7]?parseFloat(-n):parseFloat(n),this.decimal[t]=n,n},isDecimal:function(t){return t=t.toString().replace(/\s*/,""),!isNaN(parseFloat(t))&&parseFloat(t)==t},isSexagesimal:function(t){return t=t.toString().replace(/\s*/,""),this.sexagesimalPattern.test(t)},round:function(t,i){var e=Math.pow(10,i);return Math.round(t*e)/e}}),"undefined"!=typeof module&&void 0!==module.exports?(module.exports=s,"object"==typeof t&&(t.geolib=s)):"function"==typeof define&&define.amd?define("geolib",[],function(){return s}):t.geolib=s}(this),function(t,i,e){var s={getElevation:function(){void 0!==t.navigator?this.getElevationClient.apply(this,arguments):this.getElevationServer.apply(this,arguments)},getElevationClient:function(i,e){if(!t.google)throw new Error("Google maps api not loaded");if(0===i.length)return e(null,null);if(1===i.length)return e(new Error("getElevation requires at least 2 points."));for(var s=[],n=0;n<i.length;n++)s.push(new google.maps.LatLng(this.latitude(i[n]),this.longitude(i[n])));var a={path:s,samples:s.length},r=new google.maps.ElevationService,h=this;r.getElevationAlongPath(a,function(t,s){h.elevationHandler(t,s,i,e)})},getElevationServer:function(t,i){if(0===t.length)return i(null,null);if(1===t.length)return i(new Error("getElevation requires at least 2 points."));for(var e=require("googlemaps"),s=[],n=0;n<t.length;n++)s.push(this.latitude(t[n])+","+this.longitude(t[n]));var a=this;e.elevationFromPath(s.join("|"),s.length,function(e,s){a.elevationHandler(s.results,s.status,t,i)})},elevationHandler:function(t,i,e,s){var n=[];if("OK"==i){for(var a=0;a<t.length;a++)n.push({lat:this.latitude(e[a]),lng:this.longitude(e[a]),elev:t[a].elevation});s(null,n)}else s(new Error("Could not get elevation using Google's API"),elevationResult.status)},getGrade:function(t){var i=Math.abs(this.elevation(t[t.length-1])-this.elevation(t[0])),e=this.getPathLength(t);return Math.floor(i/e*100)},getTotalElevationGainAndLoss:function(t){for(var i=0,e=0,s=0;s<t.length-1;s++){var n=this.elevation(t[s])-this.elevation(t[s+1]);n>0?e+=n:i+=Math.abs(n)}return{gain:i,loss:e}}};"undefined"!=typeof module&&void 0!==module.exports?(i=require("geolib")).extend(s):"function"==typeof define&&define.amd?define(["geolib"],function(t){return t.extend(s),t}):i.extend(s)}(this,this.geolib),function(t,i){var e,s=(0,eval)("this"),n=256,a=6,r="random",h=i.pow(n,a),o=i.pow(2,52),u=2*o,l=n-1;function c(l,c,v){var g=[],y=p(function t(i,e){var s,n=[],a=typeof i;if(e&&"object"==a)for(s in i)try{n.push(t(i[s],e-1))}catch(r){}return n.length?n:"string"==a?i:i+"\0"}((c=1==c?{entropy:!0}:c||{}).entropy?[l,m(t)]:null==l?function(){try{var i;return e&&(i=e.randomBytes)?i=i(n):(i=new Uint8Array(n),(s.crypto||s.msCrypto).getRandomValues(i)),m(i)}catch(h){var a=s.navigator,r=a&&a.plugins;return[+new Date,s,r,s.screen,m(t)]}}():l,3),g),M=new f(g),x=function(){for(var t=M.g(a),i=h,e=0;t<o;)t=(t+e)*n,i*=n,e=M.g(1);for(;t>=u;)t/=2,i/=2,e>>>=1;return(t+e)/i};return x.int32=function(){return 0|M.g(4)},x.quick=function(){return M.g(4)/4294967296},x.double=x,p(m(M.S),t),(c.pass||v||function(t,e,s,n){return n&&(n.S&&d(n,M),t.state=function(){return d(M,{})}),s?(i[r]=t,e):t})(x,y,"global"in c?c.global:this==i,c.state)}function f(t){var i,e=t.length,s=this,a=0,r=s.i=s.j=0,h=s.S=[];for(e||(t=[e++]);a<n;)h[a]=a++;for(a=0;a<n;a++)h[a]=h[r=l&r+t[a%e]+(i=h[a])],h[r]=i;(s.g=function(t){for(var i,e=0,a=s.i,r=s.j,h=s.S;t--;)i=h[a=l&a+1],e=e*n+h[l&(h[a]=h[r=l&r+i])+(h[r]=i)];return s.i=a,s.j=r,e})(n)}function d(t,i){return i.i=t.i,i.j=t.j,i.S=t.S.slice(),i}function p(t,i){for(var e,s=t+"",n=0;n<s.length;)i[l&n]=l&(e^=19*i[l&n])+s.charCodeAt(n++);return m(i)}function m(t){return String.fromCharCode.apply(0,t)}if(i["seed"+r]=c,p(i.random(),t),"object"==typeof module&&module.exports){module.exports=c;try{e=require("crypto")}catch(v){}}else"function"==typeof define&&define.amd&&define(function(){return c})}([],Math),function(t,i,e,s){"use strict";function n(t,i,e){return setTimeout(u(t,e),i)}function a(t,i,e){return!!Array.isArray(t)&&(r(t,e[i],e),!0)}function r(t,i,e){var n;if(t)if(t.forEach)t.forEach(i,e);else if(t.length!==s)for(n=0;n<t.length;)i.call(e,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&i.call(e,t[n],n,t)}function h(i,e,s){var n="DEPRECATED METHOD: "+e+"\n"+s+" AT \n";return function(){var e=new Error("get-stack-trace"),s=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=t.console&&(t.console.warn||t.console.log);return a&&a.call(t.console,n,s),i.apply(this,arguments)}}function o(t,i,e){var s,n=i.prototype;(s=t.prototype=Object.create(n)).constructor=t,s._super=n,e&&$(s,e)}function u(t,i){return function(){return t.apply(i,arguments)}}function l(t,i){return typeof t==et?t.apply(i&&i[0]||s,i):t}function c(t,i){return t===s?i:t}function f(t,i,e){r(v(i),function(i){t.addEventListener(i,e,!1)})}function d(t,i,e){r(v(i),function(i){t.removeEventListener(i,e,!1)})}function p(t,i){for(;t;){if(t==i)return!0;t=t.parentNode}return!1}function m(t,i){return t.indexOf(i)>-1}function v(t){return t.trim().split(/\s+/g)}function g(t,i,e){if(t.indexOf&&!e)return t.indexOf(i);for(var s=0;s<t.length;){if(e&&t[s][e]==i||!e&&t[s]===i)return s;s++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function M(t,i,e){for(var s=[],n=[],a=0;a<t.length;){var r=i?t[a][i]:t[a];g(n,r)<0&&s.push(t[a]),n[a]=r,a++}return e&&(s=i?s.sort(function(t,e){return t[i]>e[i]}):s.sort()),s}function x(t,i){for(var e,n,a=i[0].toUpperCase()+i.slice(1),r=0;r<tt.length;){if((n=(e=tt[r])?e+a:i)in t)return n;r++}return s}function b(i){var e=i.ownerDocument||i;return e.defaultView||e.parentWindow||t}function w(t,i){var e=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(i){l(t.options.enable,[t])&&e.handler(i)},this.init()}function _(t,i,e){var s=e.pointers.length,n=e.changedPointers.length,a=i&mt&&s-n==0,r=i&(vt|gt)&&s-n==0;e.isFirst=!!a,e.isFinal=!!r,a&&(t.session={}),e.eventType=i,function(t,i){var e=t.session,s=i.pointers,n=s.length;e.firstInput||(e.firstInput=C(i)),n>1&&!e.firstMultiple?e.firstMultiple=C(i):1===n&&(e.firstMultiple=!1);var a=e.firstInput,r=e.firstMultiple,h=r?r.center:a.center,o=i.center=P(s);i.timeStamp=at(),i.deltaTime=i.timeStamp-a.timeStamp,i.angle=k(h,o),i.distance=S(h,o),function(t,i){var e=i.center,s=t.offsetDelta||{},n=t.prevDelta||{},a=t.prevInput||{};i.eventType!==mt&&a.eventType!==vt||(n=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},s=t.offsetDelta={x:e.x,y:e.y}),i.deltaX=n.x+(e.x-s.x),i.deltaY=n.y+(e.y-s.y)}(e,i),i.offsetDirection=N(i.deltaX,i.deltaY);var u=A(i.deltaTime,i.deltaX,i.deltaY);i.overallVelocityX=u.x,i.overallVelocityY=u.y,i.overallVelocity=nt(u.x)>nt(u.y)?u.x:u.y,i.scale=r?function(t,i){return S(s[0],s[1],At)/S(t[0],t[1],At)}(r.pointers):1,i.rotation=r?function(t,i){return k(s[1],s[0],At)+k(t[1],t[0],At)}(r.pointers):0,i.maxPointers=e.prevInput?i.pointers.length>e.prevInput.maxPointers?i.pointers.length:e.prevInput.maxPointers:i.pointers.length,E(e,i);var l=t.element;p(i.srcEvent.target,l)&&(l=i.srcEvent.target),i.target=l}(t,e),t.emit("hammer.input",e),t.recognize(e),t.session.prevInput=e}function E(t,i){var e,n,a,r,h=t.lastInterval||i,o=i.timeStamp-h.timeStamp;if(i.eventType!=gt&&(o>pt||h.velocity===s)){var u=i.deltaX-h.deltaX,l=i.deltaY-h.deltaY,c=A(o,u,l);n=c.x,a=c.y,e=nt(c.x)>nt(c.y)?c.x:c.y,r=N(u,l),t.lastInterval=i}else e=h.velocity,n=h.velocityX,a=h.velocityY,r=h.direction;i.velocity=e,i.velocityX=n,i.velocityY=a,i.direction=r}function C(t){for(var i=[],e=0;e<t.pointers.length;)i[e]={clientX:st(t.pointers[e].clientX),clientY:st(t.pointers[e].clientY)},e++;return{timeStamp:at(),pointers:i,center:P(i),deltaX:t.deltaX,deltaY:t.deltaY}}function P(t){var i=t.length;if(1===i)return{x:st(t[0].clientX),y:st(t[0].clientY)};for(var e=0,s=0,n=0;i>n;)e+=t[n].clientX,s+=t[n].clientY,n++;return{x:st(e/i),y:st(s/i)}}function A(t,i,e){return{x:i/t||0,y:e/t||0}}function N(t,i){return t===i?yt:nt(t)>=nt(i)?0>t?Mt:xt:0>i?bt:wt}function S(t,i,e){e||(e=Pt);var s=i[e[0]]-t[e[0]],n=i[e[1]]-t[e[1]];return Math.sqrt(s*s+n*n)}function k(t,i,e){return e||(e=Pt),180*Math.atan2(i[e[1]]-t[e[1]],i[e[0]]-t[e[0]])/Math.PI}function T(){this.evEl=St,this.evWin=kt,this.pressed=!1,w.apply(this,arguments)}function I(){this.evEl=Rt,this.evWin=Ot,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function R(){this.evTarget=Lt,this.evWin=qt,this.started=!1,w.apply(this,arguments)}function O(){this.evTarget=zt,this.targetIds={},w.apply(this,arguments)}function D(){w.apply(this,arguments);var t=u(this.handler,this);this.touch=new O(this.manager,t),this.mouse=new T(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function L(t){var i=t.changedPointers[0];if(i.identifier===this.primaryTouch){var e={x:i.clientX,y:i.clientY};this.lastTouches.push(e);var s=this.lastTouches;setTimeout(function(){var t=s.indexOf(e);t>-1&&s.splice(t,1)},Ft)}}function q(t,i){this.manager=t,this.set(i)}function j(t){this.options=$({},this.defaults,t||{}),this.id=ot++,this.manager=null,this.options.enable=c(this.options.enable,!0),this.state=Qt,this.simultaneous={},this.requireFail=[]}function z(t){return t&ti?"cancel":t&Zt?"end":t&Jt?"move":t&Kt?"start":""}function F(t){return t==wt?"down":t==bt?"up":t==Mt?"left":t==xt?"right":""}function G(t,i){var e=i.manager;return e?e.get(t):t}function X(){j.apply(this,arguments)}function B(){X.apply(this,arguments),this.pX=null,this.pY=null}function U(){X.apply(this,arguments)}function Y(){j.apply(this,arguments),this._timer=null,this._input=null}function W(){X.apply(this,arguments)}function H(){X.apply(this,arguments)}function V(){j.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Q(t,i){return(i=i||{}).recognizers=c(i.recognizers,Q.defaults.preset),new K(t,i)}function K(t,i){this.options=$({},Q.defaults,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){return new(t.options.inputClass||(lt?I:ct?O:ut?D:T))(t,_)}(this),this.touchAction=new q(this,this.options.touchAction),J(this,!0),r(this.options.recognizers,function(t){var i=this.add(new t[0](t[1]));t[2]&&i.recognizeWith(t[2]),t[3]&&i.requireFailure(t[3])},this)}function J(t,i){var e,s=t.element;s.style&&(r(t.options.cssProps,function(n,a){e=x(s.style,a),i?(t.oldCssProps[e]=s.style[e],s.style[e]=n):s.style[e]=t.oldCssProps[e]||""}),i||(t.oldCssProps={}))}function Z(t,e){var s=i.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=e,e.target.dispatchEvent(s)}var $,tt=["","webkit","Moz","MS","ms","o"],it=i.createElement("div"),et="function",st=Math.round,nt=Math.abs,at=Date.now;$="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),e=1;e<arguments.length;e++){var n=arguments[e];if(n!==s&&null!==n)for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a])}return i}:Object.assign;var rt=h(function(t,i,e){for(var n=Object.keys(i),a=0;a<n.length;)(!e||e&&t[n[a]]===s)&&(t[n[a]]=i[n[a]]),a++;return t},"extend","Use `assign`."),ht=h(function(t,i){return rt(t,i,!0)},"merge","Use `assign`."),ot=1,ut="ontouchstart"in t,lt=x(t,"PointerEvent")!==s,ct=ut&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ft="touch",dt="mouse",pt=25,mt=1,vt=4,gt=8,yt=1,Mt=2,xt=4,bt=8,wt=16,_t=Mt|xt,Et=bt|wt,Ct=_t|Et,Pt=["x","y"],At=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(b(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(b(this.element),this.evWin,this.domHandler)}};var Nt={mousedown:mt,mousemove:2,mouseup:vt},St="mousedown",kt="mousemove mouseup";o(T,w,{handler:function(t){var i=Nt[t.type];i&mt&&0===t.button&&(this.pressed=!0),2&i&&1!==t.which&&(i=vt),this.pressed&&(i&vt&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:dt,srcEvent:t}))}});var Tt={pointerdown:mt,pointermove:2,pointerup:vt,pointercancel:gt,pointerout:gt},It={2:ft,3:"pen",4:dt,5:"kinect"},Rt="pointerdown",Ot="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Rt="MSPointerDown",Ot="MSPointerMove MSPointerUp MSPointerCancel"),o(I,w,{handler:function(t){var i=this.store,e=!1,s=t.type.toLowerCase().replace("ms",""),n=Tt[s],a=It[t.pointerType]||t.pointerType,r=a==ft,h=g(i,t.pointerId,"pointerId");n&mt&&(0===t.button||r)?0>h&&(i.push(t),h=i.length-1):n&(vt|gt)&&(e=!0),0>h||(i[h]=t,this.callback(this.manager,n,{pointers:i,changedPointers:[t],pointerType:a,srcEvent:t}),e&&i.splice(h,1))}});var Dt={touchstart:mt,touchmove:2,touchend:vt,touchcancel:gt},Lt="touchstart",qt="touchstart touchmove touchend touchcancel";o(R,w,{handler:function(t){var i=Dt[t.type];if(i===mt&&(this.started=!0),this.started){var e=(function(t,i){var e=y(t.touches),s=y(t.changedTouches);return i&(vt|gt)&&(e=M(e.concat(s),"identifier",!0)),[e,s]}).call(this,t,i);i&(vt|gt)&&e[0].length-e[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:ft,srcEvent:t})}}});var jt={touchstart:mt,touchmove:2,touchend:vt,touchcancel:gt},zt="touchstart touchmove touchend touchcancel";o(O,w,{handler:function(t){var i=jt[t.type],e=(function(t,i){var e=y(t.touches),s=this.targetIds;if(i&(2|mt)&&1===e.length)return s[e[0].identifier]=!0,[e,e];var n,a,r=y(t.changedTouches),h=[],o=this.target;if(a=e.filter(function(t){return p(t.target,o)}),i===mt)for(n=0;n<a.length;)s[a[n].identifier]=!0,n++;for(n=0;n<r.length;)s[r[n].identifier]&&h.push(r[n]),i&(vt|gt)&&delete s[r[n].identifier],n++;return h.length?[M(a.concat(h),"identifier",!0),h]:void 0}).call(this,t,i);e&&this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:ft,srcEvent:t})}});var Ft=2500;o(D,w,{handler:function(t,i,e){var s=e.pointerType==dt;if(!(s&&e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents)){if(e.pointerType==ft)(function(t,i){t&mt?(this.primaryTouch=i.changedPointers[0].identifier,L.call(this,i)):t&(vt|gt)&&L.call(this,i)}).call(this,i,e);else if(s&&(function(t){for(var i=t.srcEvent.clientX,e=t.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var n=this.lastTouches[s],a=Math.abs(i-n.x),r=Math.abs(e-n.y);if(25>=a&&25>=r)return!0}return!1}).call(this,e))return;this.callback(t,i,e)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Gt=x(it.style,"touchAction"),Xt=Gt!==s,Bt="compute",Ut="manipulation",Yt="none",Wt="pan-x",Ht="pan-y",Vt=function(){if(!Xt)return!1;var i={},e=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){i[s]=!e||t.CSS.supports("touch-action",s)}),i}();q.prototype={set:function(t){t==Bt&&(t=this.compute()),Xt&&this.manager.element.style&&Vt[t]&&(this.manager.element.style[Gt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(i){l(i.options.enable,[i])&&(t=t.concat(i.getTouchAction()))}),function(t){if(m(t,Yt))return Yt;var i=m(t,Wt),e=m(t,Ht);return i&&e?Yt:i||e?i?Wt:Ht:m(t,Ut)?Ut:"auto"}(t.join(" "))},preventDefaults:function(t){var i=t.srcEvent,e=t.offsetDirection;if(!this.manager.session.prevented){var s=this.actions,n=m(s,Yt)&&!Vt[Yt],a=m(s,Ht)&&!Vt[Ht],r=m(s,Wt)&&!Vt[Wt];if(n&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return r&&a?void 0:n||a&&e&_t||r&&e&Et?this.preventSrc(i):void 0}i.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Qt=1,Kt=2,Jt=4,Zt=8,$t=Zt,ti=16;j.prototype={defaults:{},set:function(t){return $(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var i=this.simultaneous;return i[(t=G(t,this)).id]||(i[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=G(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var i=this.requireFail;return-1===g(i,t=G(t,this))&&(i.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=G(t,this);var i=g(this.requireFail,t);return i>-1&&this.requireFail.splice(i,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function i(i){e.manager.emit(i,t)}var e=this,s=this.state;Zt>s&&i(e.options.event+z(s)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),s>=Zt&&i(e.options.event+z(s))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Qt)))return!1;t++}return!0},recognize:function(t){var i=$({},t);return l(this.options.enable,[this,i])?(this.state&($t|ti|32)&&(this.state=Qt),this.state=this.process(i),void(this.state&(Kt|Jt|Zt|ti)&&this.tryEmit(i))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},o(X,j,{defaults:{pointers:1},attrTest:function(t){var i=this.options.pointers;return 0===i||t.pointers.length===i},process:function(t){var i=this.state,e=t.eventType,s=i&(Kt|Jt),n=this.attrTest(t);return s&&(e&gt||!n)?i|ti:s||n?e&vt?i|Zt:i&Kt?i|Jt:Kt:32}}),o(B,X,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ct},getTouchAction:function(){var t=this.options.direction,i=[];return t&_t&&i.push(Ht),t&Et&&i.push(Wt),i},directionTest:function(t){var i=this.options,e=!0,s=t.distance,n=t.direction,a=t.deltaX,r=t.deltaY;return n&i.direction||(i.direction&_t?(n=0===a?yt:0>a?Mt:xt,e=a!=this.pX,s=Math.abs(t.deltaX)):(n=0===r?yt:0>r?bt:wt,e=r!=this.pY,s=Math.abs(t.deltaY))),t.direction=n,e&&s>i.threshold&&n&i.direction},attrTest:function(t){return X.prototype.attrTest.call(this,t)&&(this.state&Kt||!(this.state&Kt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var i=F(t.direction);i&&(t.additionalEvent=this.options.event+i),this._super.emit.call(this,t)}}),o(U,X,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Yt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Kt)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),o(Y,j,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var i=this.options,e=t.pointers.length===i.pointers,s=t.distance<i.threshold,a=t.deltaTime>i.time;if(this._input=t,!s||!e||t.eventType&(vt|gt)&&!a)this.reset();else if(t.eventType&mt)this.reset(),this._timer=n(function(){this.state=$t,this.tryEmit()},i.time,this);else if(t.eventType&vt)return $t;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===$t&&(t&&t.eventType&vt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=at(),this.manager.emit(this.options.event,this._input)))}}),o(W,X,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Yt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Kt)}}),o(H,X,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:_t|Et,pointers:1},getTouchAction:function(){return B.prototype.getTouchAction.call(this)},attrTest:function(t){var i,e=this.options.direction;return e&(_t|Et)?i=t.overallVelocity:e&_t?i=t.overallVelocityX:e&Et&&(i=t.overallVelocityY),this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&nt(i)>this.options.velocity&&t.eventType&vt},emit:function(t){var i=F(t.offsetDirection);i&&this.manager.emit(this.options.event+i,t),this.manager.emit(this.options.event,t)}}),o(V,j,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ut]},process:function(t){var i=this.options,e=t.pointers.length===i.pointers,s=t.distance<i.threshold,a=t.deltaTime<i.time;if(this.reset(),t.eventType&mt&&0===this.count)return this.failTimeout();if(s&&a&&e){if(t.eventType!=vt)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<i.interval,h=!this.pCenter||S(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,h&&r?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=n(function(){this.state=$t,this.tryEmit()},i.interval,this),Kt):$t}return 32},failTimeout:function(){return this._timer=n(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$t&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Q.VERSION="2.0.7",Q.defaults={domEvents:!1,touchAction:Bt,enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[U,{enable:!1},["rotate"]],[H,{direction:_t}],[B,{direction:_t},["swipe"]],[V],[V,{event:"doubletap",taps:2},["tap"]],[Y]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},K.prototype={set:function(t){return $(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(t);var e,s=this.recognizers,n=i.curRecognizer;(!n||n&&n.state&$t)&&(n=i.curRecognizer=null);for(var a=0;a<s.length;)e=s[a],2===i.stopped||n&&e!=n&&!e.canRecognizeWith(n)?e.reset():e.recognize(t),!n&&e.state&(Kt|Jt|Zt)&&(n=i.curRecognizer=e),a++}},get:function(t){if(t instanceof j)return t;for(var i=this.recognizers,e=0;e<i.length;e++)if(i[e].options.event==t)return i[e];return null},add:function(t){if(a(t,"add",this))return this;var i=this.get(t.options.event);return i&&this.remove(i),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var i=this.recognizers,e=g(i,t);-1!==e&&(i.splice(e,1),this.touchAction.update())}return this},on:function(t,i){if(t!==s&&i!==s){var e=this.handlers;return r(v(t),function(t){e[t]=e[t]||[],e[t].push(i)}),this}},off:function(t,i){if(t!==s){var e=this.handlers;return r(v(t),function(t){i?e[t]&&e[t].splice(g(e[t],i),1):delete e[t]}),this}},emit:function(t,i){this.options.domEvents&&Z(t,i);var e=this.handlers[t]&&this.handlers[t].slice();if(e&&e.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var s=0;s<e.length;)e[s](i),s++}},destroy:function(){this.element&&J(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},$(Q,{INPUT_START:mt,INPUT_MOVE:2,INPUT_END:vt,INPUT_CANCEL:gt,STATE_POSSIBLE:Qt,STATE_BEGAN:Kt,STATE_CHANGED:Jt,STATE_ENDED:Zt,STATE_RECOGNIZED:$t,STATE_CANCELLED:ti,STATE_FAILED:32,DIRECTION_NONE:yt,DIRECTION_LEFT:Mt,DIRECTION_RIGHT:xt,DIRECTION_UP:bt,DIRECTION_DOWN:wt,DIRECTION_HORIZONTAL:_t,DIRECTION_VERTICAL:Et,DIRECTION_ALL:Ct,Manager:K,Input:w,TouchAction:q,TouchInput:O,MouseInput:T,PointerEventInput:I,TouchMouseInput:D,SingleTouchInput:R,Recognizer:j,AttrRecognizer:X,Tap:V,Pan:B,Swipe:H,Pinch:U,Rotate:W,Press:Y,on:f,off:d,each:r,merge:ht,extend:rt,assign:$,inherit:o,bindFn:u,prefixed:x}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=Q,"function"==typeof define&&define.amd?define(function(){return Q}):"undefined"!=typeof module&&module.exports?module.exports=Q:t.Hammer=Q}(window,document),function(t,i,e,s){"use strict";var n,a,r=!1,h={};function o(t,i,e,s,n){s=s||0,n=n||0,this.identifier=i,this.target=t,this.clientX=e.clientX+s,this.clientY=e.clientY+n,this.screenX=e.screenX+s,this.screenY=e.screenY+n,this.pageX=e.pageX+s,this.pageY=e.pageY+n}function u(){var t=[];return t.item=function(t){return this[t]||null},t.identifiedTouch=function(t){return this[t+1]||null},t}function l(t){t.preventDefault(),t.stopPropagation()}function c(t){return function(i){l(i),1===i.which&&(("mousedown"==i.type||!a||a&&!a.dispatchEvent)&&(a=i.target),r&&!i.shiftKey&&(f("touchend",i),r=!1),f(t,i),!r&&i.shiftKey&&(r=!0,n={pageX:i.pageX,pageY:i.pageY,clientX:i.clientX,clientY:i.clientY,screenX:i.screenX,screenY:i.screenY},f("touchstart",i)),"mouseup"==i.type&&(n=null,r=!1,a=null))}}function f(t,e){var s=i.createEvent("Event");s.initEvent(t,!0,!0),s.altKey=e.altKey,s.ctrlKey=e.ctrlKey,s.metaKey=e.metaKey,s.shiftKey=e.shiftKey,s.touches=p(e,t),s.targetTouches=p(e,t),s.changedTouches=function(t,i){var e=d(t);return!r||"mouseup"==t.type||"touchstart"!=i&&"touchend"!=i||e.splice(0,1),e}(e,t),a.dispatchEvent(s)}function d(t){var i=new u;if(r){var e=v.multiTouchOffset,s=n.pageX-t.pageX,h=n.pageY-t.pageY;i.push(new o(a,1,n,-1*s-e,-1*h+e)),i.push(new o(a,2,n,s+e,h-e))}else i.push(new o(a,1,t,0,0));return i}function p(t,i){if("mouseup"==t.type)return new u;var e=d(t);return r&&"mouseup"!=t.type&&"touchend"==i&&e.splice(1,1),e}function m(t){var e,s,n,a;for(s=0;s<t.touches.length;s++)for(var r in(n=h[(e=t.touches[s]).identifier])||(n=h[e.identifier]=i.createElement("div"),i.body.appendChild(n)),a=v.template(e))n.style[r]=a[r];if("touchend"==t.type||"touchcancel"==t.type)for(s=0;s<t.changedTouches.length;s++)(n=h[(e=t.changedTouches[s]).identifier])&&(n.parentNode.removeChild(n),delete h[e.identifier])}function v(){"ontouchstart"in t||t.Modernizr&&t.Modernizr.touch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>2||(function(){for(var e=[t,i.documentElement],n=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"],a=0;a<e.length;a++)for(var r=0;r<n.length;r++)e[a]&&e[a][n[r]]==s&&(e[a][n[r]]=null)}(),t.addEventListener("mousedown",c("touchstart"),!0),t.addEventListener("mousemove",c("touchmove"),!0),t.addEventListener("mouseup",c("touchend"),!0),t.addEventListener("mouseenter",l,!0),t.addEventListener("mouseleave",l,!0),t.addEventListener("mouseout",l,!0),t.addEventListener("mouseover",l,!0),t.addEventListener("touchstart",m,!1),t.addEventListener("touchmove",m,!1),t.addEventListener("touchend",m,!1),t.addEventListener("touchcancel",m,!1))}i.createTouch||(i.createTouch=function(i,e,n,a,r,h,u,l,c){return l!=s&&c!=s||(l=a-t.pageXOffset,c=r-t.pageYOffset),new o(e,n,{pageX:a,pageY:r,screenX:h,screenY:u,clientX:l,clientY:c})}),i.createTouchList||(i.createTouchList=function(){for(var t=new u,i=0;i<arguments.length;i++)t[i]=arguments[i];return t.length=arguments.length,t}),v.multiTouchOffset=75,v.template=function(t){var i="translate("+(t.clientX-15)+"px, "+(t.clientY-15)+"px)";return{position:"fixed",left:0,top:0,background:"#fff",border:"solid 1px #999",opacity:.6,borderRadius:"100%",height:"30px",width:"30px",padding:0,margin:0,display:"block",overflow:"hidden",pointerEvents:"none",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",webkitTransform:i,mozTransform:i,transform:i}},"function"==typeof define&&define.amd?define(function(){return v}):"undefined"!=typeof module&&module.exports?module.exports=v:t.TouchEmulator=v}(window,document),function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.proj4=i()}(this,function(){"use strict";function t(t,i){if(t[i])return t[i];for(var e,s=Object.keys(t),n=i.toLowerCase().replace(Q,""),a=-1;++a<s.length;)if((e=s[a]).toLowerCase().replace(Q,"")===n)return t[e]}function i(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=J}function e(t){return new i(t).output()}function s(t,i,e){Array.isArray(i)&&(e.unshift(i),i=null);var s=e.reduce(function(t,i){return n(i,t),t},i?{}:t);i&&(t[i]=s)}function n(t,i){if(Array.isArray(t)){var e=t.shift();if("PARAMETER"===e&&(e=t.shift()),1===t.length)return Array.isArray(t[0])?(i[e]={},void n(t[0],i[e])):void(i[e]=t[0]);if(t.length)if("TOWGS84"!==e){var a;switch(Array.isArray(e)||(i[e]={}),e){case"UNIT":case"PRIMEM":case"VERT_DATUM":return i[e]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&n(t[2],i[e]));case"SPHEROID":case"ELLIPSOID":return i[e]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&n(t[3],i[e]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void s(i,e,t);default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return n(t,i[e]);return s(i,e,t)}}else i[e]=t;else i[e]=!0}else i[t]=!0}function a(t){return t*st}function r(t){function i(i){return i*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;"GEOGCS"===t.type&&(e=t),e&&(t.datumCode=e.DATUM?e.DATUM.name.toLowerCase():e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach(function(i){return function(t,i){var e=i[0],s=i[1];!(e in t)&&s in t&&(t[e]=t[s],3===i.length&&(t[e]=i[2](t[e])))}(t,i)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function h(t){var i=this;if(2===arguments.length){var e=arguments[1];h[t]="string"==typeof e?"+"===e.charAt(0)?K(arguments[1]):nt(arguments[1]):e}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?h.apply(i,t):h(t)});if("string"==typeof t){if(t in h)return h[t]}else"EPSG"in t?h["EPSG:"+t.EPSG]=t:"ESRI"in t?h["ESRI:"+t.ESRI]=t:"IAU2000"in t?h["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function o(i){var e=t(i,"authority");if(e){var s=t(e,"epsg");return s&&rt.indexOf(s)>-1}}function u(i){var e=t(i,"extension");if(e)return t(e,"proj4")}function l(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in h}(t))return h[t];if(function(t){return at.some(function(i){return t.indexOf(i)>-1})}(t)){var i=nt(t);if(o(i))return h["EPSG:3857"];var e=u(i);return e?K(e):i}return function(t){return"+"===t[0]}(t)?K(t):void 0}function c(t){return t}function f(t,i){var e=mt.length;return t.names?(mt[e]=t,t.names.forEach(function(t){pt[t.toLowerCase()]=e}),this):(console.log(i),!0)}function d(i,e){if(!(this instanceof d))return new d(i);e=e||function(t){if(t)throw t};var s=l(i);if("object"==typeof s){var n=d.projections.get(s.projName);if(n){if(s.datumCode&&"none"!==s.datumCode){var a=t(Mt,s.datumCode);a&&(s.datum_params=a.towgs84?a.towgs84.split(","):null,s.ellps=a.ellipse,s.datumName=a.datumName?a.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s.ellps||"wgs84";var r=function(i,e,s,n,a){if(!i){var r=t(gt,n);r||(r=yt),i=r.a,e=r.b,s=r.rf}return s&&!e&&(e=(1-1/s)*i),(0===s||Math.abs(i-e)<G)&&(a=!0,e=i),{a:i,b:e,rf:s,sphere:a}}(s.a,s.b,s.rf,s.ellps,s.sphere),h=function(t,i,e,s){var n=t*t,a=i*i,r=(n-a)/n,h=0;return s?(n=(t*=1-r*(j+r*(z+r*F)))*t,r=0):h=Math.sqrt(r),{es:r,e:h,ep2:(n-a)/a}}(r.a,r.b,0,s.R_A),o=s.datum||function(t,i,e,s,n,a){var r={};return r.datum_type=void 0===t||"none"===t?D:O,i&&(r.datum_params=i.map(parseFloat),0===r.datum_params[0]&&0===r.datum_params[1]&&0===r.datum_params[2]||(r.datum_type=I),r.datum_params.length>3&&(0===r.datum_params[3]&&0===r.datum_params[4]&&0===r.datum_params[5]&&0===r.datum_params[6]||(r.datum_type=R,r.datum_params[3]*=L,r.datum_params[4]*=L,r.datum_params[5]*=L,r.datum_params[6]=r.datum_params[6]/1e6+1))),r.a=e,r.b=s,r.es=n,r.ep2=a,r}(s.datumCode,s.datum_params,r.a,r.b,h.es,h.ep2);ht(this,s),ht(this,n),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=o,this.init(),e(null,this)}else e(i)}else e(i)}function p(t){return t===I||t===R}function m(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function v(t,i,e){var s;return Array.isArray(e)&&(e=wt(e)),_t(e),t.datum&&i.datum&&function(t,i){return(t.datum.datum_type===I||t.datum.datum_type===R)&&"WGS84"!==i.datumCode||(i.datum.datum_type===I||i.datum.datum_type===R)&&"WGS84"!==t.datumCode}(t,i)&&(e=v(t,s=new d("WGS84"),e),t=s),"enu"!==t.axis&&(e=bt(t,!1,e)),"longlat"===t.projName?e={x:e.x*X,y:e.y*X}:(t.to_meter&&(e={x:e.x*t.to_meter,y:e.y*t.to_meter}),e=t.inverse(e)),t.from_greenwich&&(e.x+=t.from_greenwich),e=xt(t.datum,i.datum,e),i.from_greenwich&&(e={x:e.x-i.from_greenwich,y:e.y}),"longlat"===i.projName?e={x:e.x*B,y:e.y*B}:(e=i.forward(e),i.to_meter&&(e={x:e.x/i.to_meter,y:e.y/i.to_meter})),"enu"!==i.axis?bt(i,!0,e):e}function g(t,i,e){var s,n,a;return Array.isArray(e)?(s=v(t,i,e),3===e.length?[s.x,s.y,s.z]:[s.x,s.y]):(n=v(t,i,e),2===(a=Object.keys(e)).length?n:(a.forEach(function(t){"x"!==t&&"y"!==t&&(n[t]=e[t])}),n))}function y(t){return t instanceof d?t:t.oProj?t.oProj:d(t)}function M(t,i,e){t=y(t);var s,n=!1;return void 0===i?(i=t,t=Et,n=!0):(void 0!==i.x||Array.isArray(i))&&(e=i,i=t,t=Et,n=!0),i=y(i),e?g(t,i,e):(s={forward:function(e){return g(t,i,e)},inverse:function(e){return g(i,t,e)}},n&&(s.oProj=i),s)}function x(t,i){return i=i||5,function(t,i){var e="00000"+t.easting,s="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,i,e){var s=P(e);return function(t,i,e){var s=e-1,n=Pt.charCodeAt(s),a=At.charCodeAt(s),r=n+t-1,h=a+i,o=!1;return r>It&&(r=r-It+Nt-1,o=!0),(r===St||n<St&&r>St||(r>St||n<St)&&o)&&r++,(r===kt||n<kt&&r>kt||(r>kt||n<kt)&&o)&&++r===St&&r++,r>It&&(r=r-It+Nt-1),h>Tt?(h=h-Tt+Nt-1,o=!0):o=!1,(h===St||a<St&&h>St||(h>St||a<St)&&o)&&h++,(h===kt||a<kt&&h>kt||(h>kt||a<kt)&&o)&&++h===St&&h++,h>Tt&&(h=h-Tt+Nt-1),String.fromCharCode(r)+String.fromCharCode(h)}(Math.floor(t/1e5),Math.floor(i/1e5)%20,s)}(t.easting,t.northing,t.zoneNumber)+e.substr(e.length-5,i)+s.substr(s.length-5,i)}(function(t){var i,e,s,n,a,r,h=t.lat,o=t.lon,u=6378137,l=w(h),c=w(o);r=Math.floor((o+180)/6)+1,180===o&&(r=60),h>=56&&h<64&&o>=3&&o<12&&(r=32),h>=72&&h<84&&(o>=0&&o<9?r=31:o>=9&&o<21?r=33:o>=21&&o<33?r=35:o>=33&&o<42&&(r=37)),a=w(6*(r-1)-180+3),i=u/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),e=Math.tan(l)*Math.tan(l),s=.006739496752268451*Math.cos(l)*Math.cos(l);var f=.9996*i*((n=Math.cos(l)*(c-a))+(1-e+s)*n*n*n/6+(5-18*e+e*e+72*s-.39089081163157013)*n*n*n*n*n/120)+5e5,d=.9996*(u*(.9983242984503243*l-.002514607064228144*Math.sin(2*l)+2639046602129982e-21*Math.sin(4*l)-3.418046101696858e-9*Math.sin(6*l))+i*Math.tan(l)*(n*n/2+(5-e+9*s+4*s*s)*n*n*n*n/24+(61-58*e+e*e+600*s-2.2240339282485886)*n*n*n*n*n*n/720));return h<0&&(d+=1e7),{northing:Math.round(d),easting:Math.round(f),zoneNumber:r,zoneLetter:C(h)}}({lat:t[1],lon:t[0]}),i)}function b(t){var i=E(A(t.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i.right)/2,(i.top+i.bottom)/2]}function w(t){return t*(Math.PI/180)}function _(t){return t/Math.PI*180}function E(t){var i=t.northing,e=t.easting,s=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var a,r,h,o,u,l,c,f,d=6378137,p=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=e-5e5,v=i;s<"N"&&(v-=1e7),l=6*(n-1)-180+3,f=(c=v/.9996/6367449.145945056)+(3*p/2-27*p*p*p/32)*Math.sin(2*c)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*c)+151*p*p*p/96*Math.sin(6*c),a=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),h=.006739496752268451*Math.cos(f)*Math.cos(f),o=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),u=m/(.9996*a);var g=f-a*Math.tan(f)/o*(u*u/2-(5+3*r+10*h-4*h*h-.06065547077041606)*u*u*u*u/24+(61+90*r+298*h+45*r*r-1.6983531815716497-3*h*h)*u*u*u*u*u*u/720);g=_(g);var y,M=(u-(1+2*r+h)*u*u*u/6+(5-2*h+28*r-3*h*h+.05391597401814761+24*r*r)*u*u*u*u*u/120)/Math.cos(f);if(M=l+_(M),t.accuracy){var x=E({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});y={top:x.lat,right:x.lon,bottom:g,left:M}}else y={lat:g,lon:M};return y}function C(t){var i="Z";return 84>=t&&t>=72?i="X":72>t&&t>=64?i="W":64>t&&t>=56?i="V":56>t&&t>=48?i="U":48>t&&t>=40?i="T":40>t&&t>=32?i="S":32>t&&t>=24?i="R":24>t&&t>=16?i="Q":16>t&&t>=8?i="P":8>t&&t>=0?i="N":0>t&&t>=-8?i="M":-8>t&&t>=-16?i="L":-16>t&&t>=-24?i="K":-24>t&&t>=-32?i="J":-32>t&&t>=-40?i="H":-40>t&&t>=-48?i="G":-48>t&&t>=-56?i="F":-56>t&&t>=-64?i="E":-64>t&&t>=-72?i="D":-72>t&&t>=-80&&(i="C"),i}function P(t){var i=t%Ct;return 0===i&&(i=Ct),i}function A(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var i,e=t.length,s=null,n="",a=0;!/[A-Z]/.test(i=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;n+=i,a++}var r=parseInt(n,10);if(0===a||a+3>e)throw"MGRSPoint bad conversion from: "+t;var h=t.charAt(a++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+t;s=t.substring(a,a+=2);for(var o=P(r),u=function(t,i){for(var e=Pt.charCodeAt(o-1),s=1e5,n=!1;e!==t.charCodeAt(0);){if(++e===St&&e++,e===kt&&e++,e>It){if(n)throw"Bad character: "+t;e=Nt,n=!0}s+=1e5}return s}(s.charAt(0)),l=function(t,i){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var e=At.charCodeAt(o-1),s=0,n=!1;e!==t.charCodeAt(0);){if(++e===St&&e++,e===kt&&e++,e>Tt){if(n)throw"Bad character: "+t;e=Nt,n=!0}s+=1e5}return s}(s.charAt(1));l<N(h);)l+=2e6;var c=e-a;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,p,m=c/2,v=0,g=0;return m>0&&(f=1e5/Math.pow(10,m),d=t.substring(a,a+m),v=parseFloat(d)*f,p=t.substring(a+m),g=parseFloat(p)*f),{easting:v+u,northing:g+l,zoneLetter:h,zoneNumber:r,accuracy:f}}function N(t){var i;switch(t){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+t}function S(t,i,e){if(!(this instanceof S))return new S(t,i,e);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=i,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function k(t,i,e,s){var n;return t<G?(s.value=Ci.AREA_0,n=0):(n=Math.atan2(i,e),Math.abs(n)<=U?s.value=Ci.AREA_0:n>U&&n<=q+U?(s.value=Ci.AREA_1,n-=q):n>q+U||n<=-(q+U)?(s.value=Ci.AREA_2,n=n>=0?n-W:n+W):(s.value=Ci.AREA_3,n+=q)),n}function T(t,i){var e=t+i;return e<-W?e+=Y:e>+W&&(e-=Y),e}var I=1,R=2,O=4,D=5,L=484813681109536e-20,q=Math.PI/2,j=.16666666666666666,z=.04722222222222222,F=.022156084656084655,G=1e-10,X=.017453292519943295,B=57.29577951308232,U=Math.PI/4,Y=2*Math.PI,W=3.14159265359,H={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},V={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Q=/[\s_\-\/\(\)]/g,K=function(i){var e,s,n,a={},r=i.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var e=i.split("=");return e.push(!0),t[e[0].toLowerCase()]=e[1],t},{}),h={proj:"projName",datum:"datumCode",rf:function(t){a.rf=parseFloat(t)},lat_0:function(t){a.lat0=t*X},lat_1:function(t){a.lat1=t*X},lat_2:function(t){a.lat2=t*X},lat_ts:function(t){a.lat_ts=t*X},lon_0:function(t){a.long0=t*X},lon_1:function(t){a.long1=t*X},lon_2:function(t){a.long2=t*X},alpha:function(t){a.alpha=parseFloat(t)*X},lonc:function(t){a.longc=t*X},x_0:function(t){a.x0=parseFloat(t)},y_0:function(t){a.y0=parseFloat(t)},k_0:function(t){a.k0=parseFloat(t)},k:function(t){a.k0=parseFloat(t)},a:function(t){a.a=parseFloat(t)},b:function(t){a.b=parseFloat(t)},r_a:function(){a.R_A=!0},zone:function(t){a.zone=parseInt(t,10)},south:function(){a.utmSouth=!0},towgs84:function(t){a.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){a.to_meter=parseFloat(t)},units:function(i){a.units=i;var e=t(V,i);e&&(a.to_meter=e.to_meter)},from_greenwich:function(t){a.from_greenwich=t*X},pm:function(i){var e=t(H,i);a.from_greenwich=(e||parseFloat(i))*X},nadgrids:function(t){"@null"===t?a.datumCode="none":a.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(a.axis=t)}};for(e in r)s=r[e],e in h?"function"==typeof(n=h[e])?n(s):a[n]=s:a[e]=s;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a},J=1,Z=/\s/,$=/[A-Za-z]/,tt=/[A-Za-z84]/,it=/[,\]]/,et=/[\d\.E\-\+]/;i.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Z.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case J:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},i.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(it.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},i.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=J)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=J,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},i.prototype.number=function(t){if(!et.test(t)){if(it.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},i.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},i.prototype.keyword=function(t){if(tt.test(t))this.word+=t;else{if("["===t){var i=[];return i.push(this.word),this.level++,null===this.root?this.root=i:this.currentObject.push(i),this.stack.push(this.currentObject),this.currentObject=i,void(this.state=J)}if(!it.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},i.prototype.neutral=function(t){if($.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(et.test(t))return this.word=t,void(this.state=3);if(!it.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},i.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var st=.017453292519943295,nt=function(t){var i=e(t),s=i.shift(),a=i.shift();i.unshift(["name",a]),i.unshift(["type",s]);var h={};return n(i,h),r(h),h};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(h);var at=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],rt=["3857","900913","3785","102113"],ht=function(t,i){var e,s;if(t=t||{},!i)return t;for(s in i)void 0!==(e=i[s])&&(t[s]=e);return t},ot=function(t,i,e){var s=t*i;return e/Math.sqrt(1-s*s)},ut=function(t){return t<0?-1:1},lt=function(t){return Math.abs(t)<=W?t:t-ut(t)*Y},ct=function(t,i,e){var s=t*e;return s=Math.pow((1-s)/(1+s),.5*t),Math.tan(.5*(q-i))/s},ft=function(t,i){for(var e,s,n=.5*t,a=q-2*Math.atan(i),r=0;r<=15;r++)if(e=t*Math.sin(a),a+=s=q-2*Math.atan(i*Math.pow((1-e)/(1+e),n))-a,Math.abs(s)<=1e-10)return a;return-9999},dt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):ot(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(t){var i,e,s=t.x,n=t.y;if(n*B>90&&n*B<-90&&s*B>180&&s*B<-180)return null;if(Math.abs(Math.abs(n)-q)<=G)return null;if(this.sphere)i=this.x0+this.a*this.k0*lt(s-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(U+.5*n));else{var a=Math.sin(n),r=ct(this.e,n,a);i=this.x0+this.a*this.k0*lt(s-this.long0),e=this.y0-this.a*this.k0*Math.log(r)}return t.x=i,t.y=e,t},inverse:function(t){var i,e,s=t.x-this.x0,n=t.y-this.y0;if(this.sphere)e=q-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var a=Math.exp(-n/(this.a*this.k0));if(-9999===(e=ft(this.e,a)))return null}return i=lt(this.long0+s/(this.a*this.k0)),t.x=i,t.y=e,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:c,inverse:c,names:["longlat","identity"]}],pt={},mt=[],vt={start:function(){dt.forEach(f)},add:f,get:function(t){if(!t)return!1;var i=t.toLowerCase();return void 0!==pt[i]&&mt[pt[i]]?mt[pt[i]]:void 0}},gt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},yt=gt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};gt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Mt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};(d.projections=vt).start();var xt=function(t,i,e){return function(t,i){return t.datum_type===i.datum_type&&!(t.a!==i.a||Math.abs(t.es-i.es)>5e-11)&&(t.datum_type===I?t.datum_params[0]===i.datum_params[0]&&t.datum_params[1]===i.datum_params[1]&&t.datum_params[2]===i.datum_params[2]:t.datum_type!==R||t.datum_params[0]===i.datum_params[0]&&t.datum_params[1]===i.datum_params[1]&&t.datum_params[2]===i.datum_params[2]&&t.datum_params[3]===i.datum_params[3]&&t.datum_params[4]===i.datum_params[4]&&t.datum_params[5]===i.datum_params[5]&&t.datum_params[6]===i.datum_params[6])}(t,i)?e:t.datum_type===D||i.datum_type===D?e:t.es!==i.es||t.a!==i.a||p(t.datum_type)||p(i.datum_type)?(e=function(t,i,e){var s,n,a,r=t.x,h=t.y,o=t.z?t.z:0;if(h<-q&&h>-1.001*q)h=-q;else if(h>q&&h<1.001*q)h=q;else{if(h<-q)return{x:-1/0,y:-1/0,z:t.z};if(h>q)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),n=Math.sin(h),a=Math.cos(h),{x:((s=e/Math.sqrt(1-i*(n*n)))+o)*a*Math.cos(r),y:(s+o)*a*Math.sin(r),z:(s*(1-i)+o)*n}}(e,t.es,t.a),p(t.datum_type)&&(e=function(t,i,e){if(i===I)return{x:t.x+e[0],y:t.y+e[1],z:t.z+e[2]};if(i===R){var s=e[3],n=e[4],a=e[5],r=e[6];return{x:r*(t.x-a*t.y+n*t.z)+e[0],y:r*(a*t.x+t.y-s*t.z)+e[1],z:r*(-n*t.x+s*t.y+t.z)+e[2]}}}(e,t.datum_type,t.datum_params)),p(i.datum_type)&&(e=function(t,i,e){if(i===I)return{x:t.x-e[0],y:t.y-e[1],z:t.z-e[2]};if(i===R){var s=e[3],n=e[4],a=e[5],r=e[6],h=(t.x-e[0])/r,o=(t.y-e[1])/r,u=(t.z-e[2])/r;return{x:h+a*o-n*u,y:-a*h+o+s*u,z:n*h-s*o+u}}}(e,i.datum_type,i.datum_params)),function(t,i,e,s){var n,a,r,h,o,u,l,c,f,d,p,m,v,g,y,M=t.x,x=t.y,b=t.z?t.z:0;if(n=Math.sqrt(M*M+x*x),a=Math.sqrt(M*M+x*x+b*b),n/e<1e-12){if(g=0,a/e<1e-12)return y=-s,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(x,M);r=b/a,c=(h=n/a)*(1-i)*(o=1/Math.sqrt(1-i*(2-i)*h*h)),f=r*o,v=0;do{v++,u=i*(l=e/Math.sqrt(1-i*f*f))/(l+(y=n*c+b*f-l*(1-i*f*f))),m=(p=r*(o=1/Math.sqrt(1-u*(2-u)*h*h)))*c-(d=h*(1-u)*o)*f,c=d,f=p}while(m*m>1e-24&&v<30);return{x:g,y:Math.atan(p/Math.abs(d)),z:y}}(e,i.es,i.a,i.b)):e},bt=function(t,i,e){var s,n,a,r=e.x,h=e.y,o=e.z||0,u={};for(a=0;a<3;a++)if(!i||2!==a||void 0!==e.z)switch(0===a?(s=r,n="x"):1===a?(s=h,n="y"):(s=o,n="z"),t.axis[a]){case"e":u[n]=s;break;case"w":u[n]=-s;break;case"n":u[n]=s;break;case"s":u[n]=-s;break;case"u":void 0!==e[n]&&(u.z=s);break;case"d":void 0!==e[n]&&(u.z=-s);break;default:return null}return u},wt=function(t){var i={x:t[0],y:t[1]};return t.length>2&&(i.z=t[2]),t.length>3&&(i.m=t[3]),i},_t=function(t){m(t.x),m(t.y)},Et=d("WGS84"),Ct=6,Pt="AJSAJS",At="AFAFAF",Nt=65,St=73,kt=79,Tt=86,It=90,Rt={forward:x,inverse:function(t){var i=E(A(t.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]},toPoint:b};S.fromMGRS=function(t){return new S(b(t))},S.prototype.toMGRS=function(t){return x([this.x,this.y],t)};var Ot,Dt=.01068115234375,Lt=function(t){var i=[];i[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Dt))),i[1]=t*(.75-t*(.046875+t*(.01953125+t*Dt)));var e=t*t;return i[2]=e*(.46875-t*(.013020833333333334+.007120768229166667*t)),i[3]=(e*=t)*(.3645833333333333-.005696614583333333*t),i[4]=e*t*.3076171875,i},qt=function(t,i,e,s){return s[0]*t-(e*=i)*(s[1]+(i*=i)*(s[2]+i*(s[3]+i*s[4])))},jt=function(t,i,e){for(var s=1/(1-i),n=t,a=20;a;--a){var r=Math.sin(n),h=1-i*r*r;if(n-=h=(qt(n,r,Math.cos(n),e)-t)*(h*Math.sqrt(h))*s,Math.abs(h)<G)return n}return n},zt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Lt(this.es),this.ml0=qt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var i,e,s,n=t.y,a=lt(t.x-this.long0),r=Math.sin(n),h=Math.cos(n);if(this.es){var o=h*a,u=Math.pow(o,2),l=this.ep2*Math.pow(h,2),c=Math.pow(l,2),f=Math.abs(h)>G?Math.tan(n):0,d=Math.pow(f,2),p=Math.pow(d,2);i=1-this.es*Math.pow(r,2),o/=Math.sqrt(i);var m=qt(n,r,h,this.en);e=this.a*(this.k0*o*(1+u/6*(1-d+l+u/20*(5-18*d+p+14*l-58*d*l+u/42*(61+179*p-p*d-479*d)))))+this.x0,s=this.a*(this.k0*(m-this.ml0+r*a*o/2*(1+u/12*(5-d+9*l+4*c+u/30*(61+p-58*d+270*l-330*d*l+u/56*(1385+543*p-p*d-3111*d))))))+this.y0}else{var v=h*Math.sin(a);if(Math.abs(Math.abs(v)-1)<G)return 93;if(e=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,s=h*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(s))>=1){if(v-1>G)return 93;s=0}else s=Math.acos(s);n<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return t.x=e,t.y=s,t},inverse:function(t){var i,e,s,n,a=1/this.a*(t.x-this.x0),r=1/this.a*(t.y-this.y0);if(this.es)if(e=jt(i=this.ml0+r/this.k0,this.es,this.en),Math.abs(e)<q){var h=Math.sin(e),o=Math.cos(e),u=Math.abs(o)>G?Math.tan(e):0,l=this.ep2*Math.pow(o,2),c=Math.pow(l,2),f=Math.pow(u,2),d=Math.pow(f,2);i=1-this.es*Math.pow(h,2);var p=a*Math.sqrt(i)/this.k0,m=Math.pow(p,2);s=e-(i*=u)*m/(1-this.es)*.5*(1-m/12*(5+3*f-9*l*f+l-4*c-m/30*(61+90*f-252*l*f+45*d+46*l-m/56*(1385+3633*f+4095*d+1574*d*f)))),n=lt(this.long0+p*(1-m/6*(1+2*f+l-m/20*(5+28*f+24*d+8*l*f+6*l-m/42*(61+662*f+1320*d+720*d*f))))/o)}else s=q*ut(r),n=0;else{var v=Math.exp(a/this.k0),g=.5*(v-1/v),y=Math.cos(this.lat0+r/this.k0);i=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(g,2))),s=Math.asin(i),r<0&&(s=-s),n=0===g&&0===y?0:lt(Math.atan2(g,y)+this.long0)}return t.x=n,t.y=s,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Ft=function(t){var i=Math.exp(t);return(i-1/i)/2},Gt=function(t,i){t=Math.abs(t),i=Math.abs(i);var e=Math.max(t,i),s=Math.min(t,i)/(e||1);return e*Math.sqrt(1+Math.pow(s,2))},Xt=function(t,i){for(var e,s=2*Math.cos(2*i),n=t.length-1,a=t[n],r=0;--n>=0;)e=s*a-r+t[n],r=a,a=e;return i+e*Math.sin(2*i)},Bt=function(t,i,e){for(var s,n,a=Math.sin(i),r=Math.cos(i),h=Ft(e),o=function(t){var i=Math.exp(e);return(i+1/i)/2}(),u=2*r*o,l=-2*a*h,c=t.length-1,f=t[c],d=0,p=0,m=0;--c>=0;)s=p,n=d,f=u*(p=f)-s-l*(d=m)+t[c],m=l*p-n+u*d;return[(u=a*o)*f-(l=r*h)*m,u*m+l*f]},Ut={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),i=t/(2-t),e=i;this.cgb[0]=i*(2+i*(-2/3+i*(i*(116/45+i*(26/45+i*(-2854/675)))-2))),this.cbg[0]=i*(i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))-2),this.cgb[1]=(e*=i)*(7/3+i*(i*(-227/45+i*(2704/315+i*(2323/945)))-1.6)),this.cbg[1]=e*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),this.cgb[2]=(e*=i)*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=e*(-26/15+i*(34/21+i*(1.6+i*(-12686/2835)))),this.cgb[3]=(e*=i)*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=e*(1237/630+i*(i*(-24832/14175)-2.4)),this.cgb[4]=(e*=i)*(4174/315+i*(-144838/6237)),this.cbg[4]=e*(-734/315+i*(109598/31185)),this.cgb[5]=(e*=i)*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+e*(.25+e*(1/64+e/256))),this.utg[0]=i*(i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))-.5),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=e*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=e*(13/48+i*(i*(557/1440+i*(281/630+i*(-1983433/1935360)))-.6)),this.utg[2]=(e*=i)*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=e*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),this.utg[3]=(e*=i)*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=e*(49561/161280+i*(-179/168+i*(6601661/7257600))),this.utg[4]=(e*=i)*(-4583/161280+i*(108847/3991680)),this.gtu[4]=e*(34729/80640+i*(-3418889/1995840)),this.utg[5]=-.03233083094085698*(e*=i),this.gtu[5]=.6650675310896665*e;var s=Xt(this.cbg,this.lat0);this.Zb=-this.Qn*(s+function(t,i){for(var e,s=2*Math.cos(i),n=t.length-1,a=t[n],r=0;--n>=0;)e=s*a-r+t[n],r=a,a=e;return Math.sin(i)*e}(this.gtu,2*s))},forward:function(t){var i=lt(t.x-this.long0),e=t.y;e=Xt(this.cbg,e);var s=Math.sin(e),n=Math.cos(e),a=Math.sin(i),r=Math.cos(i);e=Math.atan2(s,r*n),i=Math.atan2(a*n,Gt(s,n*r)),i=function(t){var i=Math.abs(t);return i=function(t){var i=1+t,e=i-1;return 0===e?t:t*Math.log(i)/e}(i*(1+i/(Gt(1,i)+1))),t<0?-i:i}(Math.tan(i));var h,o,u=Bt(this.gtu,2*e,2*i);return e+=u[0],i+=u[1],Math.abs(i)<=2.623395162778?(h=this.a*(this.Qn*i)+this.x0,o=this.a*(this.Qn*e+this.Zb)+this.y0):(h=1/0,o=1/0),t.x=h,t.y=o,t},inverse:function(t){var i,e,s=1/this.a*(t.x-this.x0),n=1/this.a*(t.y-this.y0);if(n=(n-this.Zb)/this.Qn,s/=this.Qn,Math.abs(s)<=2.623395162778){var a=Bt(this.utg,2*n,2*s);n+=a[0],s+=a[1],s=Math.atan(Ft(s));var r=Math.sin(n),h=Math.cos(n),o=Math.sin(s),u=Math.cos(s);n=Math.atan2(r*u,Gt(o,u*h)),s=Math.atan2(o,u*h),i=lt(s+this.long0),e=Xt(this.cgb,n)}else i=1/0,e=1/0;return t.x=i,t.y=e,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},Yt={init:function(){var t=function(t,i){if(void 0===t){if((t=Math.floor(30*(lt(i)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*X,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ut.init.apply(this),this.forward=Ut.forward,this.inverse=Ut.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Wt=function(t,i){return Math.pow((1-t)/(1+t),i)},Ht={init:function(){var t=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+U)/(Math.pow(Math.tan(.5*this.lat0+U),this.C)*Wt(this.e*t,this.ratexp))},forward:function(t){var i=t.x,e=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+U),this.C)*Wt(this.e*Math.sin(e),this.ratexp))-q,t.x=this.C*i,t},inverse:function(t){for(var i=t.x/this.C,e=t.y,s=Math.pow(Math.tan(.5*e+U)/this.K,1/this.C),n=20;n>0&&(e=2*Math.atan(s*Wt(this.e*Math.sin(t.y),-.5*this.e))-q,!(Math.abs(e-t.y)<1e-14));--n)t.y=e;return n?(t.x=i,t.y=e,t):null},names:["gauss"]},Vt={init:function(){Ht.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var i,e,s,n;return t.x=lt(t.x-this.long0),Ht.forward.apply(this,[t]),i=Math.sin(t.y),e=Math.cos(t.y),s=Math.cos(t.x),t.x=(n=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*e*s))*e*Math.sin(t.x),t.y=n*(this.cosc0*i-this.sinc0*e*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var i,e,s,n,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var r=2*Math.atan2(a,this.R2);i=Math.sin(r),e=Math.cos(r),n=Math.asin(e*this.sinc0+t.y*i*this.cosc0/a),s=Math.atan2(t.x*i,a*this.cosc0*e-t.y*this.sinc0*i)}else n=this.phic0,s=0;return t.x=s,t.y=n,Ht.inverse.apply(this,[t]),t.x=lt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Qt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=G&&(this.k0=.5*(1+ut(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=G&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=G&&(this.k0=.5*this.cons*ot(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ct(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ot(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-q,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var i,e,s,n,a,r,h=t.x,o=t.y,u=Math.sin(o),l=Math.cos(o),c=lt(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=G&&Math.abs(o+this.lat0)<=G?(t.x=NaN,t.y=NaN,t):this.sphere?(i=2*this.k0/(1+this.sinlat0*u+this.coslat0*l*Math.cos(c)),t.x=this.a*i*l*Math.sin(c)+this.x0,t.y=this.a*i*(this.coslat0*u-this.sinlat0*l*Math.cos(c))+this.y0,t):(e=2*Math.atan(this.ssfn_(o,u,this.e))-q,n=Math.cos(e),s=Math.sin(e),Math.abs(this.coslat0)<=G?(a=ct(this.e,o*this.con,this.con*u),t.x=this.x0+(r=2*this.a*this.k0*a/this.cons)*Math.sin(h-this.long0),t.y=this.y0-this.con*r*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<G?(i=2*this.a*this.k0/(1+n*Math.cos(c)),t.y=i*s):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*n*Math.cos(c))),t.y=i*(this.cosX0*s-this.sinX0*n*Math.cos(c))+this.y0),t.x=i*n*Math.sin(c)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i,e,s,n,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var r=2*Math.atan(a/(2*this.a*this.k0));return i=this.long0,e=this.lat0,a<=G?(t.x=i,t.y=e,t):(e=Math.asin(Math.cos(r)*this.sinlat0+t.y*Math.sin(r)*this.coslat0/a),i=lt(Math.abs(this.coslat0)<G?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(r),a*this.coslat0*Math.cos(r)-t.y*this.sinlat0*Math.sin(r))),t.x=i,t.y=e,t)}if(Math.abs(this.coslat0)<=G){if(a<=G)return e=this.lat0,t.x=i=this.long0,t.y=e,t;t.x*=this.con,t.y*=this.con,e=this.con*ft(this.e,a*this.cons/(2*this.a*this.k0)),i=this.con*lt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,a<=G?n=this.X0:(n=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/a),i=lt(this.long0+Math.atan2(t.x*Math.sin(s),a*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),e=-1*ft(this.e,Math.tan(.5*(q+n)));return t.x=i,t.y=e,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,i,e){return i*=e,Math.tan(.5*(q+t))*Math.pow((1-i)/(1+i),.5*e)}},Kt={init:function(){var t=this.lat0;this.lambda0=this.long0;var i=Math.sin(t),e=this.a,s=1/this.rf,n=2*s-Math.pow(s,2),a=this.e=Math.sqrt(n);this.R=this.k0*e*Math.sqrt(1-n)/(1-n*Math.pow(i,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(i/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),o=Math.log((1+a*i)/(1-a*i));this.K=r-this.alpha*h+this.alpha*a/2*o},forward:function(t){var i=Math.log(Math.tan(Math.PI/4-t.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=2*(Math.atan(Math.exp(-this.alpha*(i+e)+this.K))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),r=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var i=(t.x-this.x0)/this.R,e=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(i)),n=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(e))),a=this.lambda0+n/this.alpha,r=0,h=s,o=-1e3,u=0;Math.abs(h-o)>1e-7;){if(++u>20)return;r=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),o=h,h=2*Math.atan(Math.exp(r))-Math.PI/2}return t.x=a,t.y=h,t},names:["somerc"]},Jt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),i=Math.cos(this.lat0),e=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(i,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-e*e);var s,n,a=ct(this.e,this.lat0,t),r=this.bl/i*Math.sqrt((1-this.es)/(1-e*e));if(r*r<1&&(r=1),isNaN(this.longc)){var h=ct(this.e,this.lat1,Math.sin(this.lat1)),o=ct(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(r+Math.sqrt(r*r-1))*Math.pow(a,this.bl):(r-Math.sqrt(r*r-1))*Math.pow(a,this.bl);var u=Math.pow(h,this.bl),l=Math.pow(o,this.bl);n=.5*((s=this.el/u)-1/s);var c=(this.el*this.el-l*u)/(this.el*this.el+l*u),f=(l-u)/(l+u),d=lt(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=lt(this.long0);var p=lt(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/n),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else s=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=s*Math.pow(a,this.bl),n=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(n*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},forward:function(t){var i,e,s,n=t.y,a=lt(t.x-this.long0);if(Math.abs(Math.abs(n)-q)<=G)s=n>0?-1:1,e=this.al/this.bl*Math.log(Math.tan(U+s*this.gamma0*.5)),i=-1*s*q*this.al/this.bl;else{var r=ct(this.e,n,Math.sin(n)),h=this.el/Math.pow(r,this.bl),o=.5*(h-1/h),u=.5*(h+1/h),l=Math.sin(this.bl*a),c=(o*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/u;e=Math.abs(Math.abs(c)-1)<=G?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-c)/(1+c))/this.bl,i=Math.abs(Math.cos(this.bl*a))<=G?this.al*this.bl*a:this.al*Math.atan2(o*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+i,t.y=this.y0+e):(i-=this.uc,t.x=this.x0+e*Math.cos(this.alpha)+i*Math.sin(this.alpha),t.y=this.y0+i*Math.cos(this.alpha)-e*Math.sin(this.alpha)),t},inverse:function(t){var i,e;this.no_rot?(e=t.y-this.y0,i=t.x-this.x0):(e=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),i=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),i+=this.uc);var s=Math.exp(-1*this.bl*e/this.al),n=.5*(s-1/s),a=.5*(s+1/s),r=Math.sin(this.bl*i/this.al),h=(r*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/a,o=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<G?(t.x=this.long0,t.y=q):Math.abs(h+1)<G?(t.x=this.long0,t.y=-1*q):(t.y=ft(this.e,o),t.x=lt(this.long0-Math.atan2(n*Math.cos(this.gamma0)-r*Math.sin(this.gamma0),Math.cos(this.bl*i/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Zt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<G)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var i=Math.sin(this.lat1),e=Math.cos(this.lat1),s=ot(this.e,i,e),n=ct(this.e,this.lat1,i),a=Math.sin(this.lat2),r=Math.cos(this.lat2),h=ot(this.e,a,r),o=ct(this.e,this.lat2,a),u=ct(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>G?Math.log(s/h)/Math.log(n/o):i,isNaN(this.ns)&&(this.ns=i),this.f0=s/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var i=t.x,e=t.y;Math.abs(2*Math.abs(e)-Math.PI)<=G&&(e=ut(e)*(q-2*G));var s,n,a=Math.abs(Math.abs(e)-q);if(a>G)s=ct(this.e,e,Math.sin(e)),n=this.a*this.f0*Math.pow(s,this.ns);else{if((a=e*this.ns)<=0)return null;n=0}var r=this.ns*lt(i-this.long0);return t.x=this.k0*(n*Math.sin(r))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(r))+this.y0,t},inverse:function(t){var i,e,s,n,a,r=(t.x-this.x0)/this.k0,h=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(r*r+h*h),e=1):(i=-Math.sqrt(r*r+h*h),e=-1);var o=0;if(0!==i&&(o=Math.atan2(e*r,e*h)),0!==i||this.ns>0){if(e=1/this.ns,s=Math.pow(i/(this.a*this.f0),e),-9999===(n=ft(this.e,s)))return null}else n=-q;return a=lt(o/this.ns+this.long0),t.x=a,t.y=n,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},$t={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var i,e,s,n,a,r,h,o=t.y,u=lt(t.x-this.long0);return i=Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(o/2+this.s45),this.alfa)/i)-this.s45),s=-u*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(s)),a=Math.asin(Math.cos(e)*Math.sin(s)/Math.cos(n)),r=this.n*a,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=h*Math.cos(r)/1,t.x=h*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var i,e,s,n,a,r,h,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x)/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(n)),e=Math.asin(Math.cos(s)*Math.sin(n)/Math.cos(i)),t.x=this.long0-e/this.alfa,r=i,h=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(h=1),r=t.y,u+=1}while(0===h&&u<15);return u>=15?null:t},names:["Krovak","krovak"]},ti=function(t,i,e,s,n){return t*n-i*Math.sin(2*n)+e*Math.sin(4*n)-s*Math.sin(6*n)},ii=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},ei=function(t){return.375*t*(1+.25*t*(1+.46875*t))},si=function(t){return.05859375*t*t*(1+.75*t)},ni=function(t){return t*t*t*(35/3072)},ai=function(t,i,e){var s=i*e;return t/Math.sqrt(1-s*s)},ri=function(t){return Math.abs(t)<q?t:t-ut(t)*Math.PI},hi=function(t,i,e,s,n){var a,r;a=t/i;for(var h=0;h<15;h++)if(a+=r=(t-(i*a-e*Math.sin(2*a)+s*Math.sin(4*a)-n*Math.sin(6*a)))/(i-2*e*Math.cos(2*a)+4*s*Math.cos(4*a)-6*n*Math.cos(6*a)),Math.abs(r)<=1e-10)return a;return NaN},oi={init:function(){this.sphere||(this.e0=ii(this.es),this.e1=ei(this.es),this.e2=si(this.es),this.e3=ni(this.es),this.ml0=this.a*ti(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var i,e,s=t.x,n=t.y;if(s=lt(s-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(n)*Math.sin(s)),e=this.a*(Math.atan2(Math.tan(n),Math.cos(s))-this.lat0);else{var a=Math.sin(n),r=Math.cos(n),h=ai(this.a,this.e,a),o=Math.tan(n)*Math.tan(n),u=s*Math.cos(n),l=u*u,c=this.es*r*r/(1-this.es);i=h*u*(1-l*o*(1/6-(8-o+8*c)*l/120)),e=this.a*ti(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+h*a/r*l*(.5+(5-o+6*c)*l/24)}return t.x=i+this.x0,t.y=e+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i,e,s=t.x/this.a,n=t.y/this.a;if(this.sphere){var a=n+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(s)),e=Math.atan2(Math.tan(s),Math.cos(a))}else{var r=hi(this.ml0/this.a+n,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-q)<=G)return t.x=this.long0,t.y=q,n<0&&(t.y*=-1),t;var h=ai(this.a,this.e,Math.sin(r)),o=h*h*h/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(r),2),l=s*this.a/h,c=l*l;i=r-h*Math.tan(r)/o*l*l*(.5-(1+3*u)*l*l/24),e=l*(1-c*(u/3+(1+3*u)*u*c/15))/Math.cos(r)}return t.x=lt(e+this.long0),t.y=ri(i),t},names:["Cassini","Cassini_Soldner","cass"]},ui=function(t,i){var e;return t>1e-7?(1-t*t)*(i/(1-(e=t*i)*e)-.5/t*Math.log((1-e)/(1+e))):2*i},li={init:function(){var t,i=Math.abs(this.lat0);if(this.mode=Math.abs(i-q)<G?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<G?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=ui(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var i,e=[];return e[0]=.3333333333333333*t,e[0]+=.17222222222222222*(i=t*t),e[1]=.06388888888888888*i,e[0]+=.10257936507936508*(i*=t),e[1]+=.0664021164021164*i,e[2]=.016415012942191543*i,e}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ui(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var i,e,s,n,a,r,h,o,u,l,c=t.x,f=t.y;if(c=lt(c-this.long0),this.sphere){if(a=Math.sin(f),l=Math.cos(f),s=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+l*s:1+this.sinph0*a+this.cosph0*l*s)<=G)return null;i=(e=Math.sqrt(2/e))*l*Math.sin(c),e*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*l*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(f+this.phi0)<G)return null;e=U-.5*f,i=(e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)))*Math.sin(c),e*=s}}else{switch(h=0,o=0,u=0,s=Math.cos(c),n=Math.sin(c),a=Math.sin(f),r=ui(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=r/this.qp,o=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:u=1+this.sinb1*h+this.cosb1*o*s;break;case this.EQUIT:u=1+o*s;break;case this.N_POLE:u=q+f,r=this.qp-r;break;case this.S_POLE:u=f-q,r=this.qp+r}if(Math.abs(u)<G)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),e=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*h-this.sinb1*o*s):(u=Math.sqrt(2/(1+o*s)))*h*this.ymf,i=this.xmf*u*o*n;break;case this.N_POLE:case this.S_POLE:r>=0?(i=(u=Math.sqrt(r))*n,e=s*(this.mode===this.S_POLE?u:-u)):i=e=0}}return t.x=this.a*i+this.x0,t.y=this.a*e+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i,e,s,n,a,r,h,o=t.x/this.a,u=t.y/this.a;if(this.sphere){var l,c=0,f=0;if((e=.5*(l=Math.sqrt(o*o+u*u)))>1)return null;switch(e=2*Math.asin(e),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(e),c=Math.cos(e)),this.mode){case this.EQUIT:e=Math.abs(l)<=G?0:Math.asin(u*f/l),o*=f,u=c*l;break;case this.OBLIQ:e=Math.abs(l)<=G?this.phi0:Math.asin(c*this.sinph0+u*f*this.cosph0/l),o*=f*this.cosph0,u=(c-Math.sin(e)*this.sinph0)*l;break;case this.N_POLE:u=-u,e=q-e;break;case this.S_POLE:e-=q}i=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(o,u):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o/=this.dd,u*=this.dd,(r=Math.sqrt(o*o+u*u))<G)return t.x=0,t.y=this.phi0,t;n=2*Math.asin(.5*r/this.rq),s=Math.cos(n),o*=n=Math.sin(n),this.mode===this.OBLIQ?(a=this.qp*(h=s*this.sinb1+u*n*this.cosb1/r),u=r*this.cosb1*s-u*this.sinb1*n):(a=this.qp*(h=u*n/r),u=r*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(a=o*o+u*u))return t.x=0,t.y=this.phi0,t;h=1-a/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(o,u),e=function(t,i){var e=t+t;return t+i[0]*Math.sin(e)+i[1]*Math.sin(e+e)+i[2]*Math.sin(e+e+e)}(Math.asin(h),this.apa)}return t.x=lt(this.long0+i),t.y=e,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ci=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},fi={init:function(){Math.abs(this.lat1+this.lat2)<G||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ot(this.e3,this.sin_po,this.cos_po),this.qs1=ui(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ot(this.e3,this.sin_po,this.cos_po),this.qs2=ui(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ui(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>G?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var i=t.x,e=t.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var s=ui(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,a=this.ns0*lt(i-this.long0),r=n*Math.sin(a)+this.x0,h=this.rh-n*Math.cos(a)+this.y0;return t.x=r,t.y=h,t},inverse:function(t){var i,e,s,n,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1),s=0,0!==i&&(s=Math.atan2(e*t.x,e*t.y)),e=i*this.ns0/this.a,a=this.sphere?Math.asin((this.c-e*e)/(2*this.ns0)):this.phi1z(this.e3,(this.c-e*e)/this.ns0),n=lt(s/this.ns0+this.long0),t.x=n,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,i){var e,s,n,a,r=ci(.5*i);if(t<G)return r;for(var h=t*t,o=1;o<=25;o++)if(r+=a=.5*(n=1-(s=t*(e=Math.sin(r)))*s)*n/Math.cos(r)*(i/(1-h)-e/n+.5/t*Math.log((1-s)/(1+s))),Math.abs(a)<=1e-7)return r;return null}},di={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var i,e,s,n,a,r,h,o=t.y;return s=lt(t.x-this.long0),i=Math.sin(o),e=Math.cos(o),n=Math.cos(s),(a=this.sin_p14*i+this.cos_p14*e*n)>0||Math.abs(a)<=G?(r=this.x0+1*this.a*e*Math.sin(s)/a,h=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*e*n)/a):(r=this.x0+this.infinity_dist*e*Math.sin(s),h=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*e*n)),t.x=r,t.y=h,t},inverse:function(t){var i,e,s,n,a,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(i=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(i,this.rc),e=Math.sin(n),s=Math.cos(n),r=ci(s*this.sin_p14+t.y*e*this.cos_p14/i),a=Math.atan2(t.x*e,i*this.cos_p14*s-t.y*this.sin_p14*e),a=lt(this.long0+a)):(r=this.phic0,a=0),t.x=a,t.y=r,t},names:["gnom"]},pi={init:function(){this.sphere||(this.k0=ot(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var i,e,s=t.y,n=lt(t.x-this.long0);if(this.sphere)i=this.x0+this.a*n*Math.cos(this.lat_ts),e=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var a=ui(this.e,Math.sin(s));i=this.x0+this.a*this.k0*n,e=this.y0+this.a*a*.5/this.k0}return t.x=i,t.y=e,t},inverse:function(t){var i,e;return t.x-=this.x0,t.y-=this.y0,this.sphere?(i=lt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(e=function(t,i){var e=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(i)-e)<1e-6)return i<0?-1*q:q;for(var s,n,a,r,h=Math.asin(.5*i),o=0;o<30;o++)if(n=Math.sin(h),a=Math.cos(h),r=t*n,h+=s=Math.pow(1-r*r,2)/(2*a)*(i/(1-t*t)-n/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),Math.abs(s)<=1e-10)return h;return NaN}(this.e,2*t.y*this.k0/this.a),i=lt(this.long0+t.x/(this.a*this.k0))),t.x=i,t.y=e,t},names:["cea"]},mi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var i=t.y,e=lt(t.x-this.long0),s=ri(i-this.lat0);return t.x=this.x0+this.a*e*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var i=t.y;return t.x=lt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=ri(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},vi={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ii(this.es),this.e1=ei(this.es),this.e2=si(this.es),this.e3=ni(this.es),this.ml0=this.a*ti(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var i,e,s,n=t.y,a=lt(t.x-this.long0);if(s=a*Math.sin(n),this.sphere)Math.abs(n)<=G?(i=this.a*a,e=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(n),e=this.a*(ri(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=G)i=this.a*a,e=-1*this.ml0;else{var r=ai(this.a,this.e,Math.sin(n))/Math.tan(n);i=r*Math.sin(s),e=this.a*ti(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+r*(1-Math.cos(s))}return t.x=i+this.x0,t.y=e+this.y0,t},inverse:function(t){var i,e,s,n,a,r,h,o,u;if(s=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=G)i=lt(s/this.a+this.long0),e=0;else{var l;for(h=s*s/this.a/this.a+(r=this.lat0+n/this.a)*r,o=r,a=20;a;--a)if(o+=u=-1*(r*(o*(l=Math.tan(o))+1)-o-.5*(o*o+h)*l)/((o-r)/l-1),Math.abs(u)<=G){e=o;break}i=lt(this.long0+Math.asin(s*Math.tan(o)/this.a)/Math.sin(e))}else if(Math.abs(n+this.ml0)<=G)e=0,i=lt(this.long0+s/this.a);else{var c,f,d,p,m;for(h=s*s/this.a/this.a+(r=(this.ml0+n)/this.a)*r,o=r,a=20;a;--a)if(m=this.e*Math.sin(o),c=Math.sqrt(1-m*m)*Math.tan(o),f=this.a*ti(this.e0,this.e1,this.e2,this.e3,o),d=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),o-=u=(r*(c*(p=f/this.a)+1)-p-.5*c*(p*p+h))/(this.es*Math.sin(2*o)*(p*p+h-2*r*p)/(4*c)+(r-p)*(c*d-2/Math.sin(2*o))-d),Math.abs(u)<=G){e=o;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),i=lt(this.long0+Math.asin(s*c/this.a)/Math.sin(e))}return t.x=i,t.y=e,t},names:["Polyconic","poly"]},gi={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var i,e=(t.y-this.lat0)/L*1e-5,s=t.x-this.long0,n=1,a=0;for(i=1;i<=10;i++)a+=this.A[i]*(n*=e);var r,h=a,o=s,u=1,l=0,c=0,f=0;for(i=1;i<=6;i++)r=l*h+u*o,c=c+this.B_re[i]*(u=u*h-l*o)-this.B_im[i]*(l=r),f=f+this.B_im[i]*u+this.B_re[i]*l;return t.x=f*this.a+this.x0,t.y=c*this.a+this.y0,t},inverse:function(t){var i,e,s=(t.y-this.y0)/this.a,n=(t.x-this.x0)/this.a,a=1,r=0,h=0,o=0;for(i=1;i<=6;i++)e=r*s+a*n,h=h+this.C_re[i]*(a=a*s-r*n)-this.C_im[i]*(r=e),o=o+this.C_im[i]*a+this.C_re[i]*r;for(var u=0;u<this.iterations;u++){var l,c=h,f=o,d=s,p=n;for(i=2;i<=6;i++)l=f*h+c*o,d+=(i-1)*(this.B_re[i]*(c=c*h-f*o)-this.B_im[i]*(f=l)),p+=(i-1)*(this.B_im[i]*c+this.B_re[i]*f);c=1,f=0;var m=this.B_re[1],v=this.B_im[1];for(i=2;i<=6;i++)l=f*h+c*o,m+=i*(this.B_re[i]*(c=c*h-f*o)-this.B_im[i]*(f=l)),v+=i*(this.B_im[i]*c+this.B_re[i]*f);var g=m*m+v*v;h=(d*m+p*v)/g,o=(p*m-d*v)/g}var y=h,M=o,x=1,b=0;for(i=1;i<=9;i++)b+=this.D[i]*(x*=y);var w=this.lat0+b*L*1e5;return t.x=this.long0+M,t.y=w,t},names:["New_Zealand_Map_Grid","nzmg"]},yi={init:function(){},forward:function(t){var i=t.y,e=lt(t.x-this.long0),s=this.x0+this.a*e,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=n,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i=lt(this.long0+t.x/this.a),e=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=i,t.y=e,t},names:["Miller_Cylindrical","mill"]},Mi={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Lt(this.es)},forward:function(t){var i,e,s=t.x,n=t.y;if(s=lt(s-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(n),r=20;r;--r){var h=(this.m*n+Math.sin(n)-a)/(this.m+Math.cos(n));if(n-=h,Math.abs(h)<G)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;i=this.a*this.C_x*s*(this.m+Math.cos(n)),e=this.a*this.C_y*n}else{var o=Math.sin(n),u=Math.cos(n);e=this.a*qt(n,o,u,this.en),i=this.a*s*u/Math.sqrt(1-this.es*o*o)}return t.x=i,t.y=e,t},inverse:function(t){var i,e,s,n;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,i=t.y/this.a,this.sphere?(i/=this.C_y,s/=this.C_x*(this.m+Math.cos(i)),this.m?i=ci((this.m*i+Math.sin(i))/this.n):1!==this.n&&(i=ci(Math.sin(i)/this.n)),s=lt(s+this.long0),i=ri(i)):(i=jt(t.y/this.a,this.es,this.en),(n=Math.abs(i))<q?(n=Math.sin(i),e=this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(i)),s=lt(e)):n-G<q&&(s=this.long0)),t.x=s,t.y=i,t},names:["Sinusoidal","sinu"]},xi={init:function(){},forward:function(t){for(var i=t.y,e=lt(t.x-this.long0),s=i,n=Math.PI*Math.sin(i);;){var a=-(s+Math.sin(s)-n)/(1+Math.cos(s));if(s+=a,Math.abs(a)<G)break}s/=2,Math.PI/2-Math.abs(i)<G&&(e=0);var r=.900316316158*this.a*e*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=r,t.y=h,t},inverse:function(t){var i,e;t.x-=this.x0,t.y-=this.y0,e=t.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),i=Math.asin(e);var s=lt(this.long0+t.x/(.900316316158*this.a*Math.cos(i)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),e=(2*i+Math.sin(2*i))/Math.PI,Math.abs(e)>1&&(e=1);var n=Math.asin(e);return t.x=s,t.y=n,t},names:["Mollweide","moll"]},bi={init:function(){Math.abs(this.lat1+this.lat2)<G||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ii(this.es),this.e1=ei(this.es),this.e2=si(this.es),this.e3=ni(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ot(this.e,this.sinphi,this.cosphi),this.ml1=ti(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<G?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ot(this.e,this.sinphi,this.cosphi),this.ml2=ti(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ti(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var i,e=t.x,s=t.y;if(this.sphere)i=this.a*(this.g-s);else{var n=ti(this.e0,this.e1,this.e2,this.e3,s);i=this.a*(this.g-n)}var a=this.ns*lt(e-this.long0),r=this.x0+i*Math.sin(a),h=this.y0+this.rh-i*Math.cos(a);return t.x=r,t.y=h,t},inverse:function(t){var i,e,s,n;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1);var a=0;return 0!==e&&(a=Math.atan2(i*t.x,i*t.y)),this.sphere?(n=lt(this.long0+a/this.ns),s=ri(this.g-e/this.a),t.x=n,t.y=s,t):(s=hi(this.g-e/this.a,this.e0,this.e1,this.e2,this.e3),n=lt(this.long0+a/this.ns),t.x=n,t.y=s,t)},names:["Equidistant_Conic","eqdc"]},wi={init:function(){this.R=this.a},forward:function(t){var i,e,s=t.y,n=lt(t.x-this.long0);Math.abs(s)<=G&&(i=this.x0+this.R*n,e=this.y0);var a=ci(2*Math.abs(s/Math.PI));(Math.abs(n)<=G||Math.abs(Math.abs(s)-q)<=G)&&(i=this.x0,e=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var r=.5*Math.abs(Math.PI/n-n/Math.PI),h=r*r,o=Math.sin(a),u=Math.cos(a),l=u/(o+u-1),c=l*(2/o-1),f=c*c,d=Math.PI*this.R*(r*(l-f)+Math.sqrt(h*(l-f)*(l-f)-(f+h)*(l*l-f)))/(f+h);n<0&&(d=-d),i=this.x0+d;var p=h+l;return d=Math.PI*this.R*(c*p-r*Math.sqrt((f+h)*(h+1)-p*p))/(f+h),e=s>=0?this.y0+d:this.y0-d,t.x=i,t.y=e,t},inverse:function(t){var i,e,s,n,a,r,h,o,u,l,c,f;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,a=(s=t.x/c)*s+(n=t.y/c)*n,c=3*(n*n/(o=-2*(r=-Math.abs(n)*(1+a))+1+2*n*n+a*a)+(2*(h=r-2*n*n+s*s)*h*h/o/o/o-9*r*h/o/o)/27)/(u=(r-h*h/3/o)/o)/(l=2*Math.sqrt(-u/3)),Math.abs(c)>1&&(c=c>=0?1:-1),f=Math.acos(c)/3,e=t.y>=0?(-l*Math.cos(f+Math.PI/3)-h/3/o)*Math.PI:-(-l*Math.cos(f+Math.PI/3)-h/3/o)*Math.PI,i=Math.abs(s)<G?this.long0:lt(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(s*s-n*n)+a*a))/2/s),t.x=i,t.y=e,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},_i={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var i,e,s,n,a,r,h,o,u,l,c,f,d,p,m,v,g,y,M,x,b,w,_=t.x,E=t.y,C=Math.sin(t.y),P=Math.cos(t.y),A=lt(_-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=G?(t.x=this.x0+this.a*(q-E)*Math.sin(A),t.y=this.y0-this.a*(q-E)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=G?(t.x=this.x0+this.a*(q+E)*Math.sin(A),t.y=this.y0+this.a*(q+E)*Math.cos(A),t):(y=this.sin_p12*C+this.cos_p12*P*Math.cos(A),g=(v=Math.acos(y))/Math.sin(v),t.x=this.x0+this.a*g*P*Math.sin(A),t.y=this.y0+this.a*g*(this.cos_p12*C-this.sin_p12*P*Math.cos(A)),t):(i=ii(this.es),e=ei(this.es),s=si(this.es),n=ni(this.es),Math.abs(this.sin_p12-1)<=G?(a=this.a*ti(i,e,s,n,q),r=this.a*ti(i,e,s,n,E),t.x=this.x0+(a-r)*Math.sin(A),t.y=this.y0-(a-r)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=G?(a=this.a*ti(i,e,s,n,q),r=this.a*ti(i,e,s,n,E),t.x=this.x0+(a+r)*Math.sin(A),t.y=this.y0+(a+r)*Math.cos(A),t):(h=C/P,o=ai(this.a,this.e,this.sin_p12),u=ai(this.a,this.e,C),l=Math.atan((1-this.es)*h+this.es*o*this.sin_p12/(u*P)),M=0===(c=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(l)-this.sin_p12*Math.cos(A)))?Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.abs(Math.abs(c)-Math.PI)<=G?-Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.asin(Math.sin(A)*Math.cos(l)/Math.sin(c)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),d=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es),t.x=this.x0+(v=o*M*(1-(x=M*M)*(m=d*d)*(1-m)/6+(b=x*M)/8*(p=f*d)*(1-2*m)+(w=b*M)/120*(m*(4-7*m)-3*f*f*(1-7*m))-w*M/48*p))*Math.sin(c),t.y=this.y0+v*Math.cos(c),t))},inverse:function(t){var i,e,s,n,a,r,h,o,u,l,c,f,d,p,m,v,g,y,M,x,b,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((i=Math.sqrt(t.x*t.x+t.y*t.y))>2*q*this.a)return;return e=i/this.a,s=Math.sin(e),n=Math.cos(e),a=this.long0,Math.abs(i)<=G?r=this.lat0:(r=ci(n*this.sin_p12+t.y*s*this.cos_p12/i),h=Math.abs(this.lat0)-q,a=lt(Math.abs(h)<=G?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*s,i*this.cos_p12*n-t.y*this.sin_p12*s))),t.x=a,t.y=r,t}return o=ii(this.es),u=ei(this.es),l=si(this.es),c=ni(this.es),Math.abs(this.sin_p12-1)<=G?(f=this.a*ti(o,u,l,c,q),i=Math.sqrt(t.x*t.x+t.y*t.y),r=hi((f-i)/this.a,o,u,l,c),a=lt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=r,t):Math.abs(this.sin_p12+1)<=G?(f=this.a*ti(o,u,l,c,q),i=Math.sqrt(t.x*t.x+t.y*t.y),r=hi((i-f)/this.a,o,u,l,c),a=lt(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=r,t):(i=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),d=ai(this.a,this.e,this.sin_p12),v=Math.cos(m),M=3*this.es*(1-(y=-(g=this.e*this.cos_p12*v)*g/(1-this.es)))*this.sin_p12*this.cos_p12*v/(1-this.es),w=1-y*(b=(x=i/d)-y*(1+y)*Math.pow(x,3)/6-M*(1+3*y)*Math.pow(x,4)/24)*b/2-x*b*b*b/6,p=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*v),a=lt(this.long0+Math.asin(Math.sin(m)*Math.sin(b)/Math.cos(p))),r=Math.atan((1-this.es*w*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),t.x=a,t.y=r,t)},names:["Azimuthal_Equidistant","aeqd"]},Ei={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var i,e,s,n,a,r,h,o=t.y;return s=lt(t.x-this.long0),i=Math.sin(o),e=Math.cos(o),n=Math.cos(s),((a=this.sin_p14*i+this.cos_p14*e*n)>0||Math.abs(a)<=G)&&(r=1*this.a*e*Math.sin(s),h=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*e*n)),t.x=r,t.y=h,t},inverse:function(t){var i,e,s,n,a,r,h;return t.x-=this.x0,t.y-=this.y0,i=Math.sqrt(t.x*t.x+t.y*t.y),e=ci(i/this.a),s=Math.sin(e),n=Math.cos(e),r=this.long0,Math.abs(i)<=G?(h=this.lat0,t.x=r,t.y=h,t):(h=ci(n*this.sin_p14+t.y*s*this.cos_p14/i),a=Math.abs(this.lat0)-q,Math.abs(a)<=G?(r=lt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=r,t.y=h,t):(r=lt(this.long0+Math.atan2(t.x*s,i*this.cos_p14*n-t.y*this.sin_p14*s)),t.x=r,t.y=h,t))},names:["ortho"]},Ci={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Pi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=q-U/2?5:this.lat0<=-(q-U/2)?6:Math.abs(this.long0)<=U?1:Math.abs(this.long0)<=q+U?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var i,e,s,n,a,r,h={x:0,y:0},o={value:0};if(t.x-=this.long0,i=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,e=t.x,5===this.face)n=q-i,e>=U&&e<=q+U?(o.value=Ci.AREA_0,s=e-q):e>q+U||e<=-(q+U)?(o.value=Ci.AREA_1,s=e>0?e-W:e+W):e>-(q+U)&&e<=-U?(o.value=Ci.AREA_2,s=e+q):(o.value=Ci.AREA_3,s=e);else if(6===this.face)n=q+i,e>=U&&e<=q+U?(o.value=Ci.AREA_0,s=-e+q):e<U&&e>=-U?(o.value=Ci.AREA_1,s=-e):e<-U&&e>=-(q+U)?(o.value=Ci.AREA_2,s=-e-q):(o.value=Ci.AREA_3,s=e>0?-e+W:-e-W);else{var u,l,c,f,d,p;2===this.face?e=T(e,+q):3===this.face?e=T(e,+W):4===this.face&&(e=T(e,-q)),f=Math.sin(i),d=Math.cos(i),p=Math.sin(e),u=d*Math.cos(e),l=d*p,c=f,1===this.face?s=k(n=Math.acos(u),c,l,o):2===this.face?s=k(n=Math.acos(l),c,-u,o):3===this.face?s=k(n=Math.acos(-u),c,-l,o):4===this.face?s=k(n=Math.acos(-l),c,u,o):(n=s=0,o.value=Ci.AREA_0)}return r=Math.atan(12/W*(s+Math.acos(Math.sin(s)*Math.cos(U))-q)),a=Math.sqrt((1-Math.cos(n))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(s))))),o.value===Ci.AREA_1?r+=q:o.value===Ci.AREA_2?r+=W:o.value===Ci.AREA_3&&(r+=1.5*W),h.x=a*Math.cos(r),h.y=a*Math.sin(r),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,t.x=h.x,t.y=h.y,t},inverse:function(t){var i,e,s,n,a,r,h,o,u,l,c,f,d={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,e=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=Ci.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=Ci.AREA_1,i-=q):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=Ci.AREA_2,i=i<0?i+W:i-W):(p.value=Ci.AREA_3,i+=q),u=W/12*Math.tan(i),a=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),r=Math.atan(a),(h=1-(s=Math.cos(i))*s*(n=Math.tan(e))*n*(1-Math.cos(Math.atan(1/Math.cos(r)))))<-1?h=-1:h>1&&(h=1),5===this.face)o=Math.acos(h),d.phi=q-o,d.lam=p.value===Ci.AREA_0?r+q:p.value===Ci.AREA_1?r<0?r+W:r-W:p.value===Ci.AREA_2?r-q:r;else if(6===this.face)o=Math.acos(h),d.phi=o-q,d.lam=p.value===Ci.AREA_0?-r+q:p.value===Ci.AREA_1?-r:p.value===Ci.AREA_2?-r-q:r<0?-r-W:-r+W;else{var m,v,g;u=(m=h)*m,v=(u+=(g=u>=1?0:Math.sqrt(1-u)*Math.sin(r))*g)>=1?0:Math.sqrt(1-u),p.value===Ci.AREA_1?(u=v,v=-g,g=u):p.value===Ci.AREA_2?(v=-v,g=-g):p.value===Ci.AREA_3&&(u=v,v=g,g=-u),2===this.face?(u=m,m=-v,v=u):3===this.face?(m=-m,v=-v):4===this.face&&(u=m,m=v,v=-u),d.phi=Math.acos(-g)-q,d.lam=Math.atan2(v,m),2===this.face?d.lam=T(d.lam,-q):3===this.face?d.lam=T(d.lam,-W):4===this.face&&(d.lam=T(d.lam,+q))}return 0!==this.es&&(l=d.phi<0?1:0,c=Math.tan(d.phi),f=this.b/Math.sqrt(c*c+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),l&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ai=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ni=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Si=B/5,ki=1/Si,Ti=function(t,i){return t[0]+i*(t[1]+i*(t[2]+i*t[3]))},Ii={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var i=lt(t.x-this.long0),e=Math.abs(t.y),s=Math.floor(e*Si);s<0?s=0:s>=18&&(s=17);var n={x:Ti(Ai[s],e=B*(e-ki*s))*i,y:Ti(Ni[s],e)};return t.y<0&&(n.y=-n.y),n.x=n.x*this.a*.8487+this.x0,n.y=n.y*this.a*1.3523+this.y0,n},inverse:function(t){var i={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(i.y>=1)i.x/=Ai[18][0],i.y=t.y<0?-q:q;else{var e=Math.floor(18*i.y);for(e<0?e=0:e>=18&&(e=17);;)if(Ni[e][0]>i.y)--e;else{if(!(Ni[e+1][0]<=i.y))break;++e}var s=Ni[e],n=5*(i.y-s[0])/(Ni[e+1][0]-s[0]);n=function(t,i,e,s){for(var n=i;s;--s){var a=t(n);if(n-=a,Math.abs(a)<e)break}return n}(function(t){return(Ti(s,t)-i.y)/function(t,i){return s[1]+i*(2*s[2]+3*i*s[3])}(0,t)},n,G,100),i.x/=Ti(Ai[e],n),i.y=(5*e+n)*X,t.y<0&&(i.y=-i.y)}return i.x=lt(i.x+this.long0),i},names:["Robinson","robin"]};return M.defaultDatum="WGS84",M.Proj=d,M.WGS84=new M.Proj("WGS84"),M.Point=S,M.toPoint=wt,M.defs=h,M.transform=v,M.mgrs=Rt,M.version="2.5.0",(Ot=M).Proj.projections.add(zt),Ot.Proj.projections.add(Ut),Ot.Proj.projections.add(Yt),Ot.Proj.projections.add(Vt),Ot.Proj.projections.add(Qt),Ot.Proj.projections.add(Kt),Ot.Proj.projections.add(Jt),Ot.Proj.projections.add(Zt),Ot.Proj.projections.add($t),Ot.Proj.projections.add(oi),Ot.Proj.projections.add(li),Ot.Proj.projections.add(fi),Ot.Proj.projections.add(di),Ot.Proj.projections.add(pi),Ot.Proj.projections.add(mi),Ot.Proj.projections.add(vi),Ot.Proj.projections.add(gi),Ot.Proj.projections.add(yi),Ot.Proj.projections.add(Mi),Ot.Proj.projections.add(xi),Ot.Proj.projections.add(bi),Ot.Proj.projections.add(wi),Ot.Proj.projections.add(_i),Ot.Proj.projections.add(Ei),Ot.Proj.projections.add(Pi),Ot.Proj.projections.add(Ii),M});