
<div class="background-wrap">
  <div class="background-layer" #background></div>
</div>

<div id="wrap">

  <cdk-virtual-scroll-viewport
    #scrollViewport

    *ngIf="trailData"

    itemSize="{{itemWidth}}"
    orientation="horizontal"
    class="virtual-list"

    (window:resize)="onResize($event)"
    (scrolledIndexChange)="onScroll(scrollViewport, $event)">

    <display-list-item
      class="list-item"

      *cdkVirtualFor="let li of trailData.miles; let last = last; templateCacheSize: cacheSize; trackBy: trackElementBy"
      [resize]="resize"
      [data]="li"
      [isLast]="last"

      [user]="(user && li.id === user.nearestMileId) ? user : null"
      [triggerUserUpdate]="(update && user && status === 'tracking' && li.id === user.nearestMileId) ? update : null"
      [userStatus] = "(user && li.id === user.nearestMileId) ? status : null"

      [visibleOHLC]="visibleOHLC"
      [update]="update"

      (click)="onClick(li)">
      matRipple
    </display-list-item>

    <!-- runs under marker layer (in list item) -->
    <guides id="guides" [visibleOHLC]="visibleOHLC" [guides]="guides"></guides>

  </cdk-virtual-scroll-viewport>

</div>

<!-- runs above marker layer (in list item) -->
<labels id="axis" [visibleOHLC]="visibleOHLC" [guides]="guides"></labels>
